<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap
    PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"
    "http://www.ibatis.com/dtd/sql-map-2.dtd">

<sqlMap namespace="sisicc.ConfiguracionInterfaz2SQL">

  <typeAlias alias="interfaz2"                  type="biz.belcorp.ssicc.dao.sisicc.model.Interfaz"/>
  <typeAlias alias="interfaz2PK"                type="biz.belcorp.ssicc.dao.sisicc.model.InterfazPK"/>
  <typeAlias alias="componenteInterfazPaquete"  type="biz.belcorp.ssicc.dao.sisicc.model.ComponenteInterfazPaquete"/>
  <typeAlias alias="labelValue"                 type="biz.belcorp.ssicc.dao.model.LabelValue"/>
  <typeAlias alias="baseClass2"                 type="biz.belcorp.ssicc.dao.sisicc.model.Base"/>
  <typeAlias alias="procesoBatchActu"           type="biz.belcorp.ssicc.dao.sisicc.model.ProcesoBatchActu"/>
  <typeAlias alias="procesoBatchHisto"          type="biz.belcorp.ssicc.dao.sisicc.model.ProcesoBatchHisto"/>
  <typeAlias alias="nroLoteMultiHilo"           type="biz.belcorp.ssicc.dao.sisicc.model.NroLoteMultiHilo"/>
  <typeAlias alias="baseConfiguracionInterfaz" 	type="biz.belcorp.ssicc.dao.sisicc.model.Base"/>
  

  <resultMap id="nroLoteMultiHiloResult" class="nroLoteMultiHilo">
    <result property="numeroLote" 				column="NUM_LOTE" 	        /> 
  </resultMap>

  <resultMap id="procesoBatchActuResult" class="procesoBatchActu">
    <result property="codigoPais" 						      column="PAIS_COD_PAIS" 	  /> 
    <result property="codigoSistema" 					      column="SIST_COD_SIST" 	  /> 
    <result property="procesoBatch.codigoProcesoBatch" 	      column="PRBA_COD_PROC_BATC" /> 
	<result property="procesoBatch.descripcionProcesoBatch"   column="DES_PROC_BATC"      /> 
	<result property="indicadorEjecucion" 		        column="IND_EJEC" 	        /> 	
	<result property="descIndicadorEjecucion" 		    column="DES_IND_EJEC" 	    /> 	
    <result property="numeroLote" 						column="NUM_LOTE" 	        /> 
	<result property="fechaInicioProceso" 				column="FEC_INIC_PROC" 	    /> 
    <result property="fechaFinProceso" 					column="FEC_FINA_PROC"      />
	<result property="codigoEstadoProceso"              column="EPBA_COD_ESTA_PROC" /> 
	<result property="descEstadoProceso"                column="DES_ESTA_PROC"      /> 
	<result property="log" 		                        column="DES_LOG" 	        /> 
    <result property="usuarioProceso"			 	    column="USU_PROC" 	        /> 
	<result property="status"			 	            column="STATUS" 	        /> 
	<result property="codigoInterfaz"			 	    column="COD_INTE"           /> 
	<result property="descripcionEtapaProceso"		 	column="DES_ETAP_PROC"      />
	<result property="descripcionRecomendacion"		 	column="DES_RECO_ERRO"      />
	<result property="periodo"		 					column="COD_PERI"      />
	<result property="fechaProceso"					 	column="FEC_PROC"      />	
	<result property="idProcesoBatch"				 	column="ID_PROC"      />
	<result property="valorAdicional1"				 	column="VAL_ADI1"      />
	<result property="valorAdicional2"				 	column="VAL_ADI2"      />
	<result property="valorAdicional3"				 	column="VAL_ADI3"      />
  </resultMap>
  
 
  <resultMap id="procesoBatchHistoResult" class="procesoBatchHisto">
    <result property="codigoPais" 						      column="PAIS_COD_PAIS" 	  /> 
    <result property="codigoSistema" 					      column="SIST_COD_SIST" 	  /> 
    <result property="procesoBatch.codigoProcesoBatch" 	      column="PRBA_COD_PROC_BATC" /> 
	<result property="procesoBatch.descripcionProcesoBatch"   column="DES_PROC_BATC" /> 
    <result property="numeroLote" 						column="NUM_LOTE" 	        /> 
	<result property="fechaInicioProceso" 				column="FEC_INIC_PROC" 	    /> 
    <result property="fechaFinProceso" 					column="FEC_FINA_PROC"      />
	<result property="codigoEstadoProceso"              column="EPBA_COD_ESTA_PROC" /> 
	<result property="descEstadoProceso"                column="DES_ESTA_PROC"      />
    <result property="log" 		                        column="DES_LOG" 	        /> 
    <result property="usuarioProceso"			 	    column="USU_PROC" 	        /> 
	<result property="status"			 	            column="STATUS" 	        /> 
	<result property="codigoInterfaz"			 	    column="COD_INTE"           /> 
	<result property="descripcionEtapaProceso"		 	column="DES_ETAP_PROC"      />
	<result property="descripcionRecomendacion"		 	column="DES_RECO_ERRO"      />
	<result property="periodo"		 					column="COD_PERI"      />
	<result property="fechaProceso"					 	column="FEC_PROC"      />	
	<result property="idProcesoBatch"				 	column="ID_PROC"      />
	<result property="valorAdicional1"				 	column="VAL_ADI1"      />
	<result property="valorAdicional2"				 	column="VAL_ADI2"      />
	<result property="valorAdicional3"				 	column="VAL_ADI3"      />		
  </resultMap>
 
  <resultMap id="interfazBusquedaResult" class="interfaz2">  
    <result property="codigoPais"                   column="PAIS_COD_PAIS"  />
    <result property="codigoSistema"                column="SIST_COD_SIST"  />
    <result property="codigo"                       column="COD_INTE"       />
    <result property="tipo"                         column="TIP_INTE"       />
    <result property="tipoGeneracion"               column="TIP_GEIN"       />  
    <result property="descripcion"                  column="DES_INTE"       />
    <result property="flagHabilitado"               column="FLA_HABI"       />
    <result property="flagExtensionArchivo"         column="FLA_EXAR"       />
    <result property="extensionArchivo"             column="EXAR_COD_EXAR"  />
    <result property="flagDelimitadorCampos"        column="FLA_DECA"       />
    <result property="codigoDelimitador"            column="DELI_COD_DELI"  />
    <result property="flagLogErrores"               column="FLA_LOER"       />
    <result property="extensionLogErrores"          column="EXAR_COD_EXLO"  />
    <result property="directorioTemporal"           column="DIR_TEMP"       />
    <result property="directorioLog"                column="DIR_LOG"        />
    <result property="directorioHistorico"          column="DIR_HIST"       />
    <result property="flagEnvioArchivo"             column="FLA_ENAR"       />
    <result property="directorioEntradaSalida"      column="DIR_ENSA"       />
    <result property="servidorFtp"                  column="SER_FTP"        />
    <result property="puertoFtp"                    column="PUE_FTP"        />
    <result property="usuarioFtp"                   column="USU_FTP"        />
    <result property="passwordFtp"                  column="PAS_FTP"        />
    <result property="estado"                       column="EST_INTE"       />
    <result property="flagFormatoArchivo"           column="FLA_FOCA"       />
    <result property="codigoFormato"                column="FOCA_COD_FOCA"  />
    <result property="flagTipoFormato"              column="FLA_ALFO"       />
    <result property="pais.descripcion"             column="DES_PAIS"       />
    <result property="sistema.descripcion"          column="DES_SIST"       />
    <result property="tipoFormatoArchivo"           column="TFAR_COD_TFAR"  />  
    <result property="nombreArchivoEntradaSalida"   column="NOM_ARCH"       />
    <result property="tipoNombreArchivo"            column="TIP_NOAR"       />
    <result property="numeroEjecucion"              column="NUM_EJIN"       />
    <result property="flagArchivoVacio"             column="FLA_ARVA"       />
	<result property="directorioProc" 			    column="DIR_PROC" 		/>
	<result property="flagComprimido" 			    column="FLA_COMP"	    />
	<result property="flagProceso" 				    column="FLA_PROC"	    />
    <result property="tipoSeparadorLinea"           column="TIP_SELI"       />
    <result property="nombreEtiquetaPrincipalXML"   column="NOM_ETIQ_PRIN_XML"       />
    <result property="nombreEtiquetaRegistroXML"    column="NOM_ETIQ_REGI_XML"       />
    <result property="indicadorSeleccion"           column="IND_SELE_INTE"       />
    <result property="addSepLineaArchivoVacio"      column="IND_AGSL_ARVA"       />
    <result property="esPaqueteMultiHilo"           column="IND_PAQU_MULT"       />    
    <result property="flagDirectorioEntradaSalida"  column="FLA_DIRE_ENTR_SALI"/>
	<result property="flagDirectorioLog"            column="FLA_DIRE_LOG"/>
	<result property="flagDirectorioHistorico"      column="FLA_DIRE_HIST"/>    
	<result property="indicadorMultiLote"           column="IND_PAQU_MULT_LOTE" />        
	<result property="flagValidarCargaPrevia" 	    column="FLA_VALI_CARG_PREV"/>   
	<result property="indicadorArchivoTemporalCopyDestino"   column="FLA_COPY_DEST_TEMP_ARCH" />    
	<result property="indicadorValidarLoteEntrada" 	column="IND_VALI_LOTE_ENTR"/>
	<result property="flagMoverArchivoEntradaTemporal" 	column="FLA_MOVE_ARCH_ENTR_TEMP"/>
  </resultMap>
  
  <resultMap id="interfazResult" class="interfaz2" extends="interfazBusquedaResult">  
    <result property="extensionArchivoDescripcion"     column="DES_EXAR" />
    <result property="extensionLogErroresDescripcion" column="DES_EXAR_LOG" />
    <result property="auditInfo.createdBy"            column="USU_DIGI" />
    <result property="auditInfo.created"              column="FEC_DIGI" />
    <result property="auditInfo.updatedBy"            column="USU_MODI" />
    <result property="auditInfo.lastUpdated"          column="FEC_MODI" />
    <result property="ordenHilo"                      column="ORD_EJEC_MULT_HILO" />
    <result property="ordenEjecucion"                 column="ORD_EJEC" />
    <result property="nivelHilo"                 	  column="NIV_HILO" />
    <result property="indicadorControl"               column="IND_CTRL" />
    <result property="codigoHomologacion"             column="COD_HOMO" />
  <result property="clavePrivadaSFTP"               column="VAL_CLAV_PRIV_SFTP" />
    <result property="passwordClavePrivadaSFTP"       column="VAL_PASS_CLAV_SFTP" />
    <result property="indicadorEnviarCorreo"       	  column="IND_EMAI" />
    <result property="correoOrigen"       			  column="EMA_ORIG" />
    <result property="correoDestinos"                 column="EMA_DEST" />    
    <result property="correoCC"                       column="EMA_COPI" />
    <result property="subject"                        column="VAL_SUBJ" />
    <result property="valorEncodingSalida"            column="VAL_ENCO_DING_SALI" />
    <result property="flagValidarCargaPrevia" 	column="FLA_VALI_CARG_PREV"/>
  </resultMap>

  <resultMap id="interfazNuevoCodigoResult" class="interfaz2">  
    <result property="codigoPais"       column="CODPAIS" />
    <result property="codigoSistema"    column="CODSIST" />
    <result property="tipoGeneracion"   column="TIPO"    />
    <result property="codigo"           column="CODIGO"  />
  </resultMap>

  <resultMap id="labelValueResult" class="labelValue">
    <result property="value"  column="CODIGO"     />
    <result property="label"  column="DESCRIPCION"/>
  </resultMap>
  
  <resultMap id="baseClassResult" class="baseClass2">
    <result property="codigo"       column="CODIGO"     />
    <result property="descripcion"  column="DESCRIPCION"/>
  </resultMap>
  
  <insert id="insertInterfaz" parameterClass="interfaz2">
    <![CDATA[
    INSERT INTO BAS_INTER (
    PAIS_COD_PAIS,
    SIST_COD_SIST, 
    COD_INTE,   
    TIP_INTE, 
    TIP_GEIN, 
    DES_INTE,
    FLA_HABI,
    FLA_EXAR,
    EXAR_COD_EXAR,
    FLA_DECA,
    DELI_COD_DELI,
    FLA_LOER,
    EXAR_COD_EXLO,
    DIR_TEMP,
    DIR_LOG,
    DIR_HIST,
    FLA_ENAR,
    DIR_ENSA,
    SER_FTP,
    PUE_FTP,
    USU_FTP,
    PAS_FTP,
    EST_INTE, 
    FLA_FOCA,
    FOCA_COD_FOCA,
    FLA_ALFO,
    USU_DIGI,
    FEC_DIGI,
    TFAR_COD_TFAR,
    NOM_ARCH,
    TIP_NOAR,
    NUM_EJIN,
    FLA_ARVA,
	DIR_PROC,
	FLA_COMP,
	FLA_PROC,
    TIP_SELI,
    NOM_ETIQ_PRIN_XML,
    NOM_ETIQ_REGI_XML,
    IND_SELE_INTE,
	FLA_DIRE_ENTR_SALI,
	FLA_DIRE_LOG,
	FLA_DIRE_HIST	
    )
    VALUES (
    #codigoPais#,
    #codigoSistema#,
    #codigo#,
    #tipo#,
    #tipoGeneracion#,
    #descripcion#,
    #flagHabilitado#,
    #flagExtensionArchivo#,
    #extensionArchivo#,
    #flagDelimitadorCampos#,
    #codigoDelimitador#,
    #flagLogErrores#,
    #extensionLogErrores#,
    #directorioTemporal#,
    #directorioLog#,
    #directorioHistorico#,
    #flagEnvioArchivo#,
    #directorioEntradaSalida#,
    #servidorFtp#,
    #puertoFtp#,
    #usuarioFtp#,
    #passwordFtp#,
    #estado#,
    #flagFormatoArchivo#,
    #codigoFormato#,
    #flagTipoFormato#,
    #auditInfo.createdBy#, 
    #auditInfo.created#,
    #tipoFormatoArchivo#,
    #nombreArchivoEntradaSalida#,
    #tipoNombreArchivo#,
    #numeroEjecucion#,
    #flagArchivoVacio#,
	#directorioProc#,
    #flagComprimido#,
    #flagProceso#,
    #tipoSeparadorLinea#,
    #nombreEtiquetaPrincipalXML#,
    #nombreEtiquetaRegistroXML#,
    #indicadorSeleccion#,
    #flagDirectorioEntradaSalida#,
    #flagDirectorioLog#,
    #flagDirectorioHistorico#
    )
    ]]>
  </insert>

  <update id="updateInterfaz" parameterClass="interfaz2">
    <![CDATA[
    UPDATE BAS_INTER
    SET TIP_INTE = #tipo#, 
    TIP_GEIN = #tipoGeneracion#, 
    DES_INTE = #descripcion#,
    FLA_HABI = #flagHabilitado#,
    FLA_EXAR = #flagExtensionArchivo#,
    EXAR_COD_EXAR = #extensionArchivo#,
    FLA_DECA = #flagDelimitadorCampos#,
    DELI_COD_DELI = #codigoDelimitador#,
    FLA_LOER = #flagLogErrores#,
    EXAR_COD_EXLO = #extensionLogErrores#,
    DIR_TEMP = #directorioTemporal#,
    DIR_LOG = #directorioLog#,
    DIR_HIST = #directorioHistorico#,
    FLA_ENAR = #flagEnvioArchivo#,
    DIR_ENSA = #directorioEntradaSalida#,
    SER_FTP = #servidorFtp#,
    PUE_FTP = #puertoFtp#,
    USU_FTP = #usuarioFtp#,
    PAS_FTP = #passwordFtp#,
    EST_INTE = #estado#,
    FLA_FOCA = #flagFormatoArchivo#,
    FOCA_COD_FOCA = #codigoFormato#,
    FLA_ALFO = #flagTipoFormato#,
    USU_MODI = #auditInfo.updatedBy#, 
    FEC_MODI = #auditInfo.lastUpdated#,
    TFAR_COD_TFAR = #tipoFormatoArchivo#, 
    NOM_ARCH = #nombreArchivoEntradaSalida#,
    TIP_NOAR = #tipoNombreArchivo#,
    FLA_ARVA = #flagArchivoVacio#,
	DIR_PROC = #directorioProc#,
	FLA_COMP = #flagComprimido#,
    FLA_PROC = #flagProceso#,
    TIP_SELI = #tipoSeparadorLinea#,
    NOM_ETIQ_PRIN_XML =#nombreEtiquetaPrincipalXML#,
    NOM_ETIQ_REGI_XML =#nombreEtiquetaRegistroXML#,
    IND_SELE_INTE = #indicadorSeleccion#,
    FLA_DIRE_ENTR_SALI = #flagDirectorioEntradaSalida#,
	FLA_DIRE_LOG = #flagDirectorioLog#,
	FLA_DIRE_HIST = #flagDirectorioHistorico#
    WHERE COD_INTE = #codigo#
    AND PAIS_COD_PAIS = #codigoPais#
    AND SIST_COD_SIST =  #codigoSistema#
    ]]>
  </update>

  <delete id="removeInterfaz" parameterClass="interfaz2PK">
    <![CDATA[
    DELETE FROM BAS_INTER
    WHERE COD_INTE = #codigo#
    AND PAIS_COD_PAIS = #codigoPais#
    AND SIST_COD_SIST =  #codigoSistema#
    ]]>
  </delete>

  <select id="getInterfaz" parameterClass="interfaz2PK" resultMap="interfazResult">
    SELECT DISTINCT
    I.PAIS_COD_PAIS,
    I.SIST_COD_SIST, 
    I.COD_INTE,   
    I.TIP_INTE, 
    I.TIP_GEIN,     
    I.DES_INTE,
    I.FLA_HABI,
    I.FLA_EXAR,
    I.EXAR_COD_EXAR,
    I.FLA_DECA,
    I.DELI_COD_DELI,
    I.FLA_LOER,
    I.EXAR_COD_EXLO,
    I.DIR_TEMP,
    I.DIR_LOG,
    I.DIR_HIST,
    I.FLA_ENAR,
    I.DIR_ENSA,
    I.SER_FTP,
    I.PUE_FTP,
    I.USU_FTP,
    I.PAS_FTP,
    I.EST_INTE,
    I.FLA_FOCA,
    I.FOCA_COD_FOCA,
    I.FLA_ALFO,
    I.USU_DIGI,
    I.FEC_DIGI,
    I.USU_MODI,
    I.FEC_MODI,
    P.DES_PAIS,
    S.DES_SIST,
    I.TFAR_COD_TFAR,
    I.NOM_ARCH AS NOM_ARCH,
    I.TIP_NOAR,
    I.NUM_EJIN,
    I.FLA_ARVA,
	I.DIR_PROC,
	I.FLA_COMP,
	I.FLA_PROC,
    I.TIP_SELI,
    I.NOM_ETIQ_PRIN_XML,
    I.NOM_ETIQ_REGI_XML,
    I.IND_SELE_INTE,
    E.DES_EXAR,
    L.DES_EXAR DES_EXAR_LOG,
    I.IND_AGSL_ARVA,
    I.IND_PAQU_MULT,
    0 as ord_ejec_mult_hilo,
    0 as ord_ejec,
    0 as niv_hilo,
	I.FLA_DIRE_ENTR_SALI,
	I.FLA_DIRE_LOG,
	I.FLA_DIRE_HIST,
	I.IND_PAQU_MULT_LOTE,
	0 as IND_CTRL,
	I.COD_HOMO,
	I.VAL_CLAV_PRIV_SFTP,
	I.VAL_PASS_CLAV_SFTP,
	I.IND_EMAI,
	I.EMA_ORIG,
	I.EMA_DEST,
	I.EMA_COPI,
	I.VAL_SUBJ,
	I.VAL_ENCO_DING_SALI,
	I.FLA_COPY_DEST_TEMP_ARCH,
	I.FLA_VALI_CARG_PREV,
	I.IND_VALI_LOTE_ENTR,
	I.FLA_MOVE_ARCH_ENTR_TEMP
    FROM BAS_INTER I, BAS_PAIS P, BAS_SISTE S, BAS_EXTEN_ARCHI E, BAS_EXTEN_ARCHI L
    WHERE I.PAIS_COD_PAIS = P.COD_PAIS
    AND I.SIST_COD_SIST = S.COD_SIST
    AND S.PAIS_COD_PAIS = P.COD_PAIS
    AND I.EXAR_COD_EXAR = E.COD_EXAR
    AND I.EXAR_COD_EXLO = L.COD_EXAR
    AND I.COD_INTE = #codigo#
    AND I.PAIS_COD_PAIS = #codigoPais#
    AND I.SIST_COD_SIST =  #codigoSistema#
  </select>

  <select id="getInterfacesByCriteria" parameterClass="java.util.Map" resultMap="interfazBusquedaResult">
    SELECT DISTINCT
    (DECODE(I.TIP_GEIN,'U',TO_NUMBER(SUBSTR(I.COD_INTE, 5,6)),TO_NUMBER(SUBSTR(I.COD_INTE, 6,6)))) COD_ORDE,
    I.PAIS_COD_PAIS,
    I.SIST_COD_SIST, 
    I.COD_INTE,   
    (CASE I.TIP_INTE WHEN 'E' THEN 'ENTRADA' WHEN 'S' THEN 'SALIDA' END) AS TIP_INTE, 
    (CASE I.TIP_GEIN WHEN 'U' THEN 'UNITARIO' WHEN 'P' THEN 'PAQUETE' WHEN 'C' THEN 'COMPUESTO' END) AS TIP_GEIN,     
    I.DES_INTE,
    (CASE I.FLA_HABI WHEN 'S' THEN 'SI' WHEN 'N' THEN 'NO' END) AS FLA_HABI, 
    I.FLA_EXAR,
    I.EXAR_COD_EXAR,
    I.FLA_DECA,
    I.DELI_COD_DELI,
    I.FLA_LOER,
    I.EXAR_COD_EXLO,
    I.DIR_TEMP,
    I.DIR_LOG,
    I.DIR_HIST,
    I.FLA_ENAR,
    I.DIR_ENSA,
    I.SER_FTP,
    I.PUE_FTP,
    I.USU_FTP,
    I.PAS_FTP,
    I.EST_INTE,
    I.FLA_FOCA,
    I.FOCA_COD_FOCA,
    I.FLA_ALFO,
    P.DES_PAIS,
    S.DES_SIST,
    I.TFAR_COD_TFAR,
    I.NOM_ARCH AS NOM_ARCH,
    I.TIP_NOAR,
    I.NUM_EJIN,
    I.FLA_ARVA,
	I.DIR_PROC,
	I.FLA_COMP,
	I.FLA_PROC,
    I.TIP_SELI,
    I.NOM_ETIQ_PRIN_XML,
    I.NOM_ETIQ_REGI_XML,
    I.IND_SELE_INTE,
    I.IND_AGSL_ARVA,
    I.IND_PAQU_MULT,
	I.FLA_DIRE_ENTR_SALI,
	I.FLA_DIRE_LOG,
	I.FLA_DIRE_HIST,
	I.IND_PAQU_MULT_LOTE,
	I.FLA_COPY_DEST_TEMP_ARCH,
	I.FLA_VALI_CARG_PREV,
	I.IND_VALI_LOTE_ENTR,
	I.FLA_MOVE_ARCH_ENTR_TEMP
    FROM BAS_INTER I, BAS_PAIS P, BAS_SISTE S 
    WHERE EST_INTE != 9
    AND I.PAIS_COD_PAIS = P.COD_PAIS
    AND I.SIST_COD_SIST = S.COD_SIST
    AND S.PAIS_COD_PAIS = P.COD_PAIS
    <isNotEmpty prepend="AND" property="codigoPais">
        I.PAIS_COD_PAIS = #codigoPais#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoSistema">
        I.SIST_COD_SIST LIKE #codigoSistema#        
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoInterfaz">
        I.COD_INTE LIKE #codigoInterfaz#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="tipoInterfaz">
        I.TIP_INTE = #tipoInterfaz#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="descripcionInterfaz">
        I.DES_INTE LIKE #descripcionInterfaz#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="estadoInterfaz">
        I.EST_INTE = #estadoInterfaz#
    </isNotEmpty>   
    ORDER BY I.PAIS_COD_PAIS, I.SIST_COD_SIST, TIP_GEIN DESC, COD_ORDE
  </select>

  <select id="getInterfacesBySistema" parameterClass="java.util.Map" resultMap="labelValueResult">
    SELECT DISTINCT 
    I.COD_INTE CODIGO, 
    I.DES_INTE DESCRIPCION
    FROM BAS_INTER I, BAS_PAIS P, BAS_SISTE S 
    WHERE EST_INTE != 9
    AND I.FLA_HABI = 'S'
    AND I.PAIS_COD_PAIS = P.COD_PAIS
    AND I.SIST_COD_SIST = S.COD_SIST
    AND S.PAIS_COD_PAIS = P.COD_PAIS
    <isNotEmpty prepend="AND" property="codigoPais">
        I.PAIS_COD_PAIS = #codigoPais#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoSistema">
        I.SIST_COD_SIST LIKE #codigoSistema#        
    </isNotEmpty>
    AND I.TIP_GEIN = 'U'
    ORDER BY 2
  </select>


  <select id="getProcesoBatchBySistema" parameterClass="java.util.Map" resultMap="labelValueResult">
    SELECT 
  		A.COD_PROC_BATC as CODIGO,
	    A.DES_PROC_BATC as DESCRIPCION 
	FROM 
	  BAS_PROCE_BATCH A
	WHERE
	  A.EST_PROC_BATC != 9    
	  <isNotEmpty prepend="AND" property="codigoPais">
		  A.PAIS_COD_PAIS = #codigoPais#
	  </isNotEmpty>
	  <isNotEmpty prepend="AND" property="codigoSistema">
		  A.SIST_COD_SIST = #codigoSistema#        
	  </isNotEmpty>
	  ORDER BY 2
  </select>

  <select id="getProcesoBatchByCriteria" parameterClass="java.util.Map" resultMap="labelValueResult">
    SELECT 
  		A.COD_PROC_BATC as CODIGO,
	    A.DES_PROC_BATC as DESCRIPCION 
	FROM 
	  BAS_PROCE_BATCH A
	WHERE
	  A.EST_PROC_BATC != 9    
	  <isNotEmpty prepend="AND" property="codigoPais">
		  A.PAIS_COD_PAIS = #codigoPais#
	  </isNotEmpty>
	  <isNotEmpty prepend="AND" property="codigoSistema">
		  A.SIST_COD_SIST = #codigoSistema#        
	  </isNotEmpty>
	  <isNotEmpty prepend="AND" property="codigoProcesoBatch">
		  A.COD_PROC_BATC = #codigoProcesoBatch#        
	  </isNotEmpty>	
  </select>

  <select id="getObtieneNroLoteProcesoBatchActu" parameterClass="java.util.Map" resultMap="nroLoteMultiHiloResult">
	   SELECT DISTINCT NUM_LOTE 
	   FROM BAS_HISTO_LOTES X
       WHERE x.id_proc_batc = #idProcesoBatch#  
       ORDER BY NUM_LOTE
  </select>
   
   <select id="getProcesoBatchActuByCriteria" parameterClass="java.util.Map" resultMap="procesoBatchActuResult">
		SELECT 
		  A.PAIS_COD_PAIS, 
		  A.SIST_COD_SIST, 
		  A.PRBA_COD_PROC_BATC, 
		  B.DES_PROC_BATC,
		  A.IND_EJEC, 
		  DECODE(A.IND_EJEC,'S','SI','NO') AS DES_IND_EJEC,
		  A.NUM_LOTE, 
		  A.FEC_INIC_PROC, 
		  A.FEC_FINA_PROC, 
		  A.EPBA_COD_ESTA_PROC,
		  C.DES_ESTA_PROC, 
		  A.DES_LOG, 
		  A.USU_PROC,
		  GEN_PKG_GENER.GEN_FN_STATUS_ESTAD_BATCH(A.EPBA_COD_ESTA_PROC) as STATUS,
		  B.COD_INTE,
		  A.DES_ETAP_PROC,
		  A.DES_RECO_ERRO,
		  A.COD_PERI,
		  A.FEC_PROC,
		  A.ID_PROC,
		  A.VAL_ADI1,
		  A.VAL_ADI2,
		  A.VAL_ADI3
		FROM BAS_PROCE_BATCH_ACTUA A,
			 BAS_PROCE_BATCH B,
			 BAS_ESTAD_PROCE_BATCH C
		WHERE
		  B.PAIS_COD_PAIS = A.PAIS_COD_PAIS AND
		  B.SIST_COD_SIST = A.SIST_COD_SIST AND
		  B.COD_PROC_BATC = A.PRBA_COD_PROC_BATC AND
		  C.COD_ESTA_PROC = A.EPBA_COD_ESTA_PROC AND
		  B.EST_PROC_BATC != 9 
		  <isNotEmpty prepend="AND" property="codigoPais">
		     A.PAIS_COD_PAIS = #codigoPais#
   	      </isNotEmpty>
	      <isNotEmpty prepend="AND" property="codigoSistema">
		       A.SIST_COD_SIST = #codigoSistema#        
  	      </isNotEmpty>
		  <isNotEmpty prepend="AND" property="codigoProcesoBatch">
		       A.PRBA_COD_PROC_BATC = #codigoProcesoBatch#        
  	      </isNotEmpty>  	      
		  <isNotEmpty prepend="AND" property="codigoPeriodo">
		       A.COD_PERI = #codigoPeriodo#        
  	      </isNotEmpty>
		  <isNotEmpty prepend="AND" property="valorAdicional1">
		       A.VAL_ADI1 = #valorAdicional1#        
  	      </isNotEmpty>  	        	      
		  <isNotEmpty prepend="AND" property="fechaInicioProceso">
		       TO_CHAR(A.FEC_INIC_PROC,'DD/MM/YYYY') = #fechaInicioProceso#        
  	      </isNotEmpty>
  	      
	    ORDER BY
		   A.PAIS_COD_PAIS, A.SIST_COD_SIST, A.FEC_INIC_PROC desc
   </select>

   <select id="getProcesoBatchActuByEstado" parameterClass="java.util.Map" resultMap="procesoBatchActuResult">
		SELECT 
		  A.PAIS_COD_PAIS, 
		  A.SIST_COD_SIST, 
		  A.PRBA_COD_PROC_BATC, 
		  B.DES_PROC_BATC,
		  A.IND_EJEC, 
		  DECODE(A.IND_EJEC,'S','SI','NO') AS DES_IND_EJEC,
		  A.NUM_LOTE, 
		  A.FEC_INIC_PROC, 
		  A.FEC_FINA_PROC, 
		  A.EPBA_COD_ESTA_PROC,
		  C.DES_ESTA_PROC, 
		  A.DES_LOG, 
		  A.USU_PROC,
		  GEN_PKG_GENER.GEN_FN_STATUS_ESTAD_BATCH(A.EPBA_COD_ESTA_PROC) as STATUS,
		  B.COD_INTE,
		  A.DES_ETAP_PROC,
		  A.DES_RECO_ERRO,
		  A.COD_PERI,
		  A.FEC_PROC,
		  A.ID_PROC,
		  A.VAL_ADI1,
		  A.VAL_ADI2,
		  A.VAL_ADI3		  
		FROM BAS_PROCE_BATCH_ACTUA A,
			 BAS_PROCE_BATCH B,
			 BAS_ESTAD_PROCE_BATCH C
		WHERE
		  B.PAIS_COD_PAIS = A.PAIS_COD_PAIS AND
		  B.SIST_COD_SIST = A.SIST_COD_SIST AND
		  B.COD_PROC_BATC = A.PRBA_COD_PROC_BATC AND
		  C.COD_ESTA_PROC = A.EPBA_COD_ESTA_PROC AND
		  B.EST_PROC_BATC != 9 AND
   		  A.PAIS_COD_PAIS = #codigoPais# AND
          A.SIST_COD_SIST = #codigoSistema#  AND      
		  A.PRBA_COD_PROC_BATC = #codigoProcesoBatch#  AND      
  	      A.EPBA_COD_ESTA_PROC = #codigoEstadoProceso#   
		ORDER BY
		   A.PAIS_COD_PAIS, A.SIST_COD_SIST, A.FEC_INIC_PROC desc    
  	      
   </select>

   <select id="getProcesoBatchHistoByCriteria" parameterClass="java.util.Map" resultMap="procesoBatchHistoResult">
		SELECT 
		  A.PAIS_COD_PAIS, 
		  A.SIST_COD_SIST, 
		  A.PRBA_COD_PROC_BATC, 
		  B.DES_PROC_BATC,
		  A.NUM_LOTE, 
		  A.FEC_INIC_PROC, 
		  A.FEC_FINA_PROC, 
		  A.EPBA_COD_ESTA_PROC, 
		  C.DES_ESTA_PROC, 
		  A.DES_LOG, 
		  A.USU_PROC,
  		  GEN_PKG_GENER.GEN_FN_STATUS_ESTAD_BATCH(A.EPBA_COD_ESTA_PROC) as STATUS,
		  B.COD_INTE,
		  A.DES_ETAP_PROC,
		  A.DES_RECO_ERRO,
		  A.COD_PERI,
		  A.FEC_PROC,
		  A.ID_PROC,
		  A.VAL_ADI1,
		  A.VAL_ADI2,
		  A.VAL_ADI3
		FROM BAS_PROCE_BATCH_HISTO A,
			 BAS_PROCE_BATCH B,
			 BAS_ESTAD_PROCE_BATCH C
		WHERE
		  B.PAIS_COD_PAIS = A.PAIS_COD_PAIS AND
		  B.SIST_COD_SIST = A.SIST_COD_SIST AND
		  B.COD_PROC_BATC = A.PRBA_COD_PROC_BATC AND	
		  C.COD_ESTA_PROC = A.EPBA_COD_ESTA_PROC AND	  
		  B.EST_PROC_BATC != 9 
		  <isNotEmpty prepend="AND" property="codigoPais">
		     A.PAIS_COD_PAIS = #codigoPais#
   	      </isNotEmpty>
	      <isNotEmpty prepend="AND" property="codigoSistema">
		       A.SIST_COD_SIST = #codigoSistema#        
  	      </isNotEmpty>
		  <isNotEmpty prepend="AND" property="codigoProcesoBatch">
		       A.PRBA_COD_PROC_BATC = #codigoProcesoBatch#        
  	      </isNotEmpty>
		  <isNotEmpty prepend="AND" property="codigoPeriodo">
		       A.COD_PERI = #codigoPeriodo#        
  	      </isNotEmpty>  	      
		  <isNotEmpty prepend="AND" property="valorAdicional1">
		       A.VAL_ADI1 = #valorAdicional1#        
  	      </isNotEmpty>  	      
		  <isNotEmpty prepend="AND" property="fechaInicioProceso">
		       TO_CHAR(A.FEC_INIC_PROC,'DD/MM/YYYY') = #fechaInicioProceso#        
  	      </isNotEmpty>
	    ORDER BY
		   A.PAIS_COD_PAIS, A.SIST_COD_SIST, A.PRBA_COD_PROC_BATC, A.FEC_INIC_PROC desc	  
   </select>

  <select id="getInterfaces" resultMap="interfazBusquedaResult">
    SELECT
    I.PAIS_COD_PAIS,
    I.SIST_COD_SIST, 
    I.COD_INTE,   
    I.TIP_INTE, 
    I.TIP_GEIN,     
    I.DES_INTE,
    I.FLA_HABI,
    I.FLA_EXAR,
    I.EXAR_COD_EXAR,
    I.FLA_DECA,
    I.DELI_COD_DELI,
    I.FLA_LOER,
    I.EXAR_COD_EXLO,
    I.DIR_TEMP,
    I.DIR_LOG,
    I.DIR_HIST,
    I.FLA_ENAR,
    I.DIR_ENSA,
    I.SER_FTP,
    I.PUE_FTP,
    I.USU_FTP,
    I.PAS_FTP,
    I.EST_INTE,
    I.FLA_FOCA,
    I.FOCA_COD_FOCA,
    I.FLA_ALFO,
    P.DES_PAIS,
    S.DES_SIST,
    I.TFAR_COD_TFAR,
    I.NOM_ARCH AS NOM_ARCH,
    I.TIP_NOAR,
    I.NUM_EJIN,
    I.FLA_ARVA,
	I.DIR_PROC,
	I.FLA_COMP,
	I.FLA_PROC,
    I.TIP_SELI,
    I.NOM_ETIQ_PRIN_XML,
    I.NOM_ETIQ_REGI_XML,
    I.IND_SELE_INTE,
    I.IND_AGSL_ARVA,
    I.IND_PAQU_MULT,
	I.FLA_DIRE_ENTR_SALI,
	I.FLA_DIRE_LOG,
	I.FLA_DIRE_HIST,
	I.IND_PAQU_MULT_LOTE,
	I.FLA_COPY_DEST_TEMP_ARCH,
	I.FLA_VALI_CARG_PREV,
	I.IND_VALI_LOTE_ENTR,
	I.FLA_MOVE_ARCH_ENTR_TEMP
    FROM BAS_INTER I, BAS_PAIS P, BAS_SISTE S 
    WHERE I.PAIS_COD_PAIS = P.COD_PAIS  
    AND I.SIST_COD_SIST = S.COD_SIST
    AND S.PAIS_COD_PAIS = P.COD_PAIS
    <isNotEmpty prepend="AND" property="codigoPais">
        I.PAIS_COD_PAIS = #codigoPais#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoSistema">
        I.SIST_COD_SIST = #codigoSistema#       
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigo">
        I.COD_INTE LIKE #codigo#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="tipo">
        I.TIP_INTE = #tipo#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="descripcion">
        I.DES_INTE LIKE #descripcion#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="estado">
        I.EST_INTE LIKE #estado#
    </isNotEmpty>
    ORDER BY I.PAIS_COD_PAIS, I.SIST_COD_SIST, I.COD_INTE
  </select>
  
   <select id="getNroHilosInterfazPaqueteSeleccionadas" parameterClass="interfaz2PK" resultClass="integer">
		SELECT COUNT(1)
		FROM 
		 (SELECT ORD_EJEC_MULT_HILO
		  FROM bas_compo_paque c
		  WHERE C.INTE_COD_INPA = #codigo#
            AND C.PAIS_COD_PAIS = #codigoPais#
            AND C.SIST_COD_SIST =  #codigoSistema#
            <iterate prepend="AND" property="listaInterfacesSeleccionadas" open="(" close=")" conjunction="OR">
       	       C.INTE_COD_INTE=#listaInterfacesSeleccionadas[]#
           </iterate>
		  GROUP BY ORD_EJEC_MULT_HILO
		  )
  </select>
  
  <select id="getNroHilosInterfazPaquete" parameterClass="interfaz2PK" resultClass="integer">
		SELECT COUNT(1)
		FROM 
		 (SELECT ORD_EJEC_MULT_HILO
		  FROM bas_compo_paque c
		  WHERE C.INTE_COD_INPA = #codigo#
            AND C.PAIS_COD_PAIS = #codigoPais#
            AND C.SIST_COD_SIST =  #codigoSistema#
		  GROUP BY ORD_EJEC_MULT_HILO
		  )
  </select>
  
  <select id="getComponentesInterfazPaquete" parameterClass="interfaz2PK" resultMap="interfazResult">
    SELECT DISTINCT
    I.PAIS_COD_PAIS,
    I.SIST_COD_SIST, 
    I.COD_INTE,   
    I.TIP_INTE, 
    I.TIP_GEIN,     
    I.DES_INTE,
    I.FLA_HABI,
    I.FLA_EXAR,
    I.EXAR_COD_EXAR,
    I.FLA_DECA,
    I.DELI_COD_DELI,
    I.FLA_LOER,
    I.EXAR_COD_EXLO,
    I.DIR_TEMP,
    I.DIR_LOG,
    I.DIR_HIST,
    I.FLA_ENAR,
    I.DIR_ENSA,
    I.SER_FTP,
    I.PUE_FTP,
    I.USU_FTP,
    I.PAS_FTP,
    I.EST_INTE,
    I.FLA_FOCA,
    I.FOCA_COD_FOCA,
    I.FLA_ALFO,
    I.USU_DIGI,
    I.FEC_DIGI,
    I.USU_MODI,
    I.FEC_MODI,
    P.DES_PAIS,
    S.DES_SIST,
    I.TFAR_COD_TFAR,
    I.NOM_ARCH AS NOM_ARCH,
    I.TIP_NOAR,
    I.NUM_EJIN,
    I.FLA_ARVA,
	I.DIR_PROC,
	I.FLA_COMP,
	I.FLA_PROC,
    I.TIP_SELI,
    I.NOM_ETIQ_PRIN_XML,
    I.NOM_ETIQ_REGI_XML,
    I.IND_SELE_INTE,
    E.DES_EXAR,
    L.DES_EXAR DES_EXAR_LOG,
    C.ORD_EJEC_MULT_HILO,
    C.ORD_EJEC,
    I.IND_AGSL_ARVA,
    I.IND_PAQU_MULT,
	I.FLA_DIRE_ENTR_SALI,
	I.FLA_DIRE_LOG,
    I.FLA_DIRE_HIST,
    I.IND_PAQU_MULT_LOTE,
    C.NIV_HILO,
    C.IND_CTRL,
    I.COD_HOMO,
   	I.VAL_CLAV_PRIV_SFTP,
	I.VAL_PASS_CLAV_SFTP,
	I.IND_EMAI,
	I.EMA_ORIG,
	I.EMA_DEST,
	I.EMA_COPI,
	I.VAL_SUBJ,
	I.VAL_ENCO_DING_SALI,
	I.FLA_COPY_DEST_TEMP_ARCH,
	I.FLA_VALI_CARG_PREV,
	I.IND_VALI_LOTE_ENTR,
	I.FLA_MOVE_ARCH_ENTR_TEMP
    FROM BAS_INTER I, BAS_PAIS P, BAS_SISTE S, BAS_COMPO_PAQUE C, BAS_EXTEN_ARCHI E, BAS_EXTEN_ARCHI L
    WHERE I.PAIS_COD_PAIS = P.COD_PAIS
    AND I.SIST_COD_SIST = S.COD_SIST
    AND S.PAIS_COD_PAIS = P.COD_PAIS
    AND C.PAIS_COD_PAIS = I.PAIS_COD_PAIS
    AND C.SIST_COD_SIST = I.SIST_COD_SIST
    AND C.INTE_COD_INTE = I.COD_INTE
    AND I.EXAR_COD_EXAR = E.COD_EXAR
    AND I.EXAR_COD_EXLO = L.COD_EXAR
    AND C.INTE_COD_INPA = #codigo#
    AND C.PAIS_COD_PAIS = #codigoPais#
    AND C.SIST_COD_SIST =  #codigoSistema#
    ORDER BY C.NIV_HILO,C.ORD_EJEC_MULT_HILO, C.ORD_EJEC, I.COD_INTE
  </select>
  
  <select id="getComponentesInterfazPaqueteSeleccionadas" parameterClass="interfaz2PK" resultMap="interfazResult">
    SELECT DISTINCT
    I.PAIS_COD_PAIS,
    I.SIST_COD_SIST, 
    I.COD_INTE,   
    I.TIP_INTE, 
    I.TIP_GEIN,     
    I.DES_INTE,
    I.FLA_HABI,
    I.FLA_EXAR,
    I.EXAR_COD_EXAR,
    I.FLA_DECA,
    I.DELI_COD_DELI,
    I.FLA_LOER,
    I.EXAR_COD_EXLO,
    I.DIR_TEMP,
    I.DIR_LOG,
    I.DIR_HIST,
    I.FLA_ENAR,
    I.DIR_ENSA,
    I.SER_FTP,
    I.PUE_FTP,
    I.USU_FTP,
    I.PAS_FTP,
    I.EST_INTE,
    I.FLA_FOCA,
    I.FOCA_COD_FOCA,
    I.FLA_ALFO,
    I.USU_DIGI,
    I.FEC_DIGI,
    I.USU_MODI,
    I.FEC_MODI,
    P.DES_PAIS,
    S.DES_SIST,
    I.TFAR_COD_TFAR,
    I.NOM_ARCH AS NOM_ARCH,
    I.TIP_NOAR,
    I.NUM_EJIN,
    I.FLA_ARVA,
	I.DIR_PROC,
	I.FLA_COMP,
	I.FLA_PROC,
    I.TIP_SELI,
    I.NOM_ETIQ_PRIN_XML,
    I.NOM_ETIQ_REGI_XML,
    I.IND_SELE_INTE,
    E.DES_EXAR,
    L.DES_EXAR DES_EXAR_LOG,
    C.ORD_EJEC_MULT_HILO,
    C.ORD_EJEC,
    I.IND_AGSL_ARVA,
    I.IND_PAQU_MULT,
	I.FLA_DIRE_ENTR_SALI,
	I.FLA_DIRE_LOG,
    I.FLA_DIRE_HIST,
    I.IND_PAQU_MULT_LOTE,
    C.NIV_HILO,
    C.IND_CTRL,
    I.COD_HOMO,
   	I.VAL_CLAV_PRIV_SFTP,
	I.VAL_PASS_CLAV_SFTP,
	I.IND_EMAI,
	I.EMA_ORIG,
	I.EMA_DEST,
	I.EMA_COPI,
	I.VAL_SUBJ,
	I.VAL_ENCO_DING_SALI,
	I.FLA_COPY_DEST_TEMP_ARCH,
	I.FLA_VALI_CARG_PREV,
	I.IND_VALI_LOTE_ENTR,
	I.FLA_MOVE_ARCH_ENTR_TEMP
    FROM BAS_INTER I, BAS_PAIS P, BAS_SISTE S, BAS_COMPO_PAQUE C, BAS_EXTEN_ARCHI E, BAS_EXTEN_ARCHI L
    WHERE I.PAIS_COD_PAIS = P.COD_PAIS
    AND I.SIST_COD_SIST = S.COD_SIST
    AND S.PAIS_COD_PAIS = P.COD_PAIS
    AND C.PAIS_COD_PAIS = I.PAIS_COD_PAIS
    AND C.SIST_COD_SIST = I.SIST_COD_SIST
    AND C.INTE_COD_INTE = I.COD_INTE
    AND I.EXAR_COD_EXAR = E.COD_EXAR
    AND I.EXAR_COD_EXLO = L.COD_EXAR
    AND C.INTE_COD_INPA = #codigo#
    AND C.PAIS_COD_PAIS = #codigoPais#
    AND C.SIST_COD_SIST =  #codigoSistema#
    <iterate prepend="AND" property="listaInterfacesSeleccionadas" open="(" close=")" conjunction="OR">
       	I.COD_INTE=#listaInterfacesSeleccionadas[]#
    </iterate>
    ORDER BY C.NIV_HILO,C.ORD_EJEC_MULT_HILO, C.ORD_EJEC, I.COD_INTE
  </select>
  
  <insert id="insertComponenteInterfazPaquete" parameterClass="componenteInterfazPaquete">
      INSERT INTO BAS_COMPO_PAQUE (
      PAIS_COD_PAIS, 
      SIST_COD_SIST, 
      INTE_COD_INPA, 
      INTE_COD_INTE,
      ORD_EJEC,
      ORD_EJEC_MULT_HILO,
      NIV_HILO) 
      VALUES (
      #codigoPais#,
      #codigoSistema#,
      #codigoInterfazPaquete#,
      #codigoInterfazUnitaria#,
      #ordenEjecucion#,
      #ordenHilo#,
      #nivelHilo#
      )
  </insert>

  <insert id="insertComponenteInterfazPaqueteModificado" parameterClass="componenteInterfazPaquete">
      INSERT INTO BAS_COMPO_PAQUE (
      PAIS_COD_PAIS, 
      SIST_COD_SIST, 
      INTE_COD_INPA, 
      INTE_COD_INTE,
      ORD_EJEC,
      ORD_EJEC_MULT_HILO) 
      VALUES (
      #codigoPais#,
      #codigoSistema#,
      #codigoInterfazPaquete#,
      #codigoInterfazUnitaria#,
      #ordenEjecucion#,
      #ordenHilo#)
  </insert>

  <delete id="removeComponentesInterfazPaquete" parameterClass="interfaz2PK">
      DELETE FROM BAS_COMPO_PAQUE
      WHERE PAIS_COD_PAIS = #codigoPais#
      AND SIST_COD_SIST = #codigoSistema#
      AND INTE_COD_INPA = #codigo#
  </delete>

  <update id="updateNumeroEjecucionInterfaz" parameterClass="interfaz2">
    <![CDATA[
    UPDATE BAS_INTER SET 
    NUM_EJIN = #numeroEjecucion#
    WHERE COD_INTE = #codigo#
    AND PAIS_COD_PAIS = #codigoPais#
    AND SIST_COD_SIST = #codigoSistema#
    ]]>
  </update>

  <parameterMap id="numeroLoteParams" class="map" >
		<parameter property="codigoPais"                jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="codigoSistema"             jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
		<parameter property="codigo"                    jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
		<parameter property="numeroLote"                jdbcType="VARCHAR" javaType="java.lang.String"  mode="OUT"/>
  </parameterMap>

  <procedure id="getNumeroLote" parameterMap="numeroLoteParams" >
		{call GEN_PKG_GENER.GEN_PR_DEVUELVE_NUM_LOTE_SGTE(?,?,?,?) }
  </procedure>

  <parameterMap id="executeProcesoRecomendacionParams" class="map" >
		<parameter property="codigoPais"                jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="codigoSistema"             jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
		<parameter property="codigoProcesoBatch"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
		<parameter property="recomendacionError"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="OUT"/>
  </parameterMap>

  <procedure id="executeProcesoBatchActuRecomendacionError" parameterMap="executeProcesoRecomendacionParams" >
		{call gen_pkg_recom_error.GEN_PR_DEVUE_RECOM_ERROR_PBATC(?,?,?,?) }
  </procedure>

  <select id="getNuevosCodigos" resultMap="interfazNuevoCodigoResult">
    <![CDATA[      
    SELECT 
    PAIS_COD_PAIS CODPAIS,
    SIST_COD_SIST CODSIST,
    TIP_GEIN TIPO,
    MAX(TO_NUMBER((CODIGO)+1)) CODIGO
    FROM 
      (  SELECT 
         PAIS_COD_PAIS,
         SIST_COD_SIST,
         TIP_GEIN,
         DECODE(TIP_GEIN, 'U', MAX(SUBSTR(COD_INTE, 5)), SUBSTR(COD_INTE, 6)) CODIGO
         FROM BAS_INTER  
         GROUP BY PAIS_COD_PAIS,
         SIST_COD_SIST,
         TIP_GEIN,
         COD_INTE
      )  
    GROUP BY PAIS_COD_PAIS,
    SIST_COD_SIST,
    TIP_GEIN
    ]]>     
  </select>

  <select id="getFechaUltimoProceso" parameterClass="interfaz2PK" resultClass="java.sql.Timestamp">
    SELECT NVL( TO_DATE (TO_CHAR( MAX(FEC_FPRO),'DD/MM/YYYY'),'DD/MM/YYYY' ), '')
    FROM BAS_HISTO_LOTES 
    WHERE PAIS_COD_PAIS = #codigoPais#
    AND SIST_COD_SIST = #codigoSistema#
    AND INTE_COD_INTE = #codigo#
  </select>
  
  <select id="getInterfacesEmpaquetadas" resultMap="baseClassResult">
    WITH TEMPORAL AS
    (SELECT * FROM BAS_INTER A
    WHERE A.FLA_HABI = 'S'
    <isNotEmpty prepend="AND" property="codigoPais">
        A.PAIS_COD_PAIS = #codigoPais#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoSistema">
        A.SIST_COD_SIST = #codigoSistema#       
    </isNotEmpty>
    ) 
     SELECT 
	    X.COD_INTE CODIGO,
	    X.DES_INTE DESCRIPCION
	 FROM 
	   (
	    SELECT DISTINCT
	    I.COD_INTE,
	    T.DES_INTE,
	    C.ORD_EJEC
	    FROM TEMPORAL T, BAS_INTER I, BAS_COMPO_PAQUE C
	    WHERE I.EST_INTE != 9
	    AND I.FLA_HABI = 'S'
	    AND I.PAIS_COD_PAIS = T.PAIS_COD_PAIS
	    AND I.SIST_COD_SIST = T.SIST_COD_SIST
	    AND I.COD_INTE = T.COD_INTE
	    AND I.PAIS_COD_PAIS = C.PAIS_COD_PAIS
	    AND I.SIST_COD_SIST = C.SIST_COD_SIST
	    AND I.COD_INTE = C.INTE_COD_INTE
	    <isNotEmpty prepend="AND" property="codigo">
	        C.INTE_COD_INPA LIKE #codigo#
	    </isNotEmpty>
	    ) X
     ORDER BY X.ORD_EJEC
  </select>

  <select id="getInterfacesNoEmpaquetadas" resultMap="baseClassResult">
    SELECT 
    I.COD_INTE CODIGO,
    ( SELECT 
	  A.DES_INTE 
	  FROM BAS_INTER A 
	  WHERE A.PAIS_COD_PAIS = I.PAIS_COD_PAIS
      AND A.COD_INTE = I.COD_INTE 
      AND A.FLA_HABI = 'S') DESCRIPCION
    FROM BAS_INTER I
    WHERE EST_INTE != 9
    AND FLA_HABI = 'S'
    AND I.TIP_GEIN = 'U'
    <isNotEmpty prepend="AND" property="codigoPais">
        I.PAIS_COD_PAIS = #codigoPais#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoSistema">
        I.SIST_COD_SIST = #codigoSistema#       
    </isNotEmpty>
    MINUS
    SELECT
    I.COD_INTE CODIGO,
    (  SELECT A.DES_INTE 
	   FROM BAS_INTER A 
	   WHERE A.PAIS_COD_PAIS = I.PAIS_COD_PAIS
         AND A.COD_INTE = I.COD_INTE) DESCRIPCION
    FROM BAS_INTER I, BAS_COMPO_PAQUE C
    WHERE EST_INTE != 9
	AND I.PAIS_COD_PAIS = C.PAIS_COD_PAIS
	AND I.SIST_COD_SIST = C.SIST_COD_SIST
	AND I.COD_INTE = C.INTE_COD_INTE
    <isNotEmpty prepend="AND" property="codigo">
        C.INTE_COD_INPA LIKE #codigo#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoPais">
        C.PAIS_COD_PAIS = #codigoPais#
    </isNotEmpty>
    <isNotEmpty prepend="AND" property="codigoSistema">
        C.SIST_COD_SIST = #codigoSistema#       
    </isNotEmpty>

  </select>
  
    <select id="getConexionExternaPais" resultClass="string">
		SELECT TCON_COD_TCON
        FROM BAS_PAIS X
        WHERE X.COD_PAIS = #value#
  </select>
  
  
  <select id="getSecuenciaSiguienteProcesoBatchActu" resultClass="long">
		SELECT BAS_SEQ_PROCE_BATCH_HISTO.NEXTVAL
        FROM dual
  </select>
  
  <insert id="insertProcesoBatchActu" parameterClass="java.util.Map">
	    INSERT INTO BAS_PROCE_BATCH_ACTUA
	    (
		PAIS_COD_PAIS, 
		SIST_COD_SIST, 
		PRBA_COD_PROC_BATC, 
		IND_EJEC, 
		FEC_INIC_PROC, 
		EPBA_COD_ESTA_PROC, 
		USU_PROC,
		DES_ETAP_PROC,
		COD_PERI,
		FEC_PROC,
		ID_PROC,
		NUM_LOTE,
		VAL_ADI1,
		VAL_ADI2,
		VAL_ADI3
		) 
	    VALUES 
	    (
		#codigoPais#,
		#codigoSistema#,
		#codigoProcesoBatch#,
		#indicadorEjecucion#,
		SYSDATE,
		#codigoEstadoProceso#,
		#codigoUsuario#,
		#descripcionEtapaProceso#,
		#periodoBatch#,
		TO_DATE(#fechaBatch#, 'dd/MM/yyyy'),
		#idProcesoBatch#,
		#numeroLote#,
		#valorAdicional1#, 
		#valorAdicional2#, 
		#valorAdicional3# 
	    )
  </insert>
  
  <delete id="deleteProcesoBatchActu" parameterClass="java.util.Map">
	    DELETE FROM BAS_PROCE_BATCH_ACTUA
	    WHERE
	        PAIS_COD_PAIS = #codigoPais# AND
			SIST_COD_SIST = #codigoSistema# AND
			PRBA_COD_PROC_BATC = #codigoProcesoBatch#
  </delete>
  
  
  <update id="updateProcesoBatchActu" parameterClass="java.util.Map">
	    UPDATE BAS_PROCE_BATCH_ACTUA
		SET
		    IND_EJEC = #indicadorEjecucion#,
			FEC_FINA_PROC = SYSDATE,
		    EPBA_COD_ESTA_PROC = #codigoEstadoProceso#,
			DES_LOG  = #descripcionLog#,
			NUM_LOTE = #numeroLote# 
	    WHERE
	        PAIS_COD_PAIS = #codigoPais# AND
			SIST_COD_SIST = #codigoSistema# AND
			PRBA_COD_PROC_BATC = #codigoProcesoBatch#
  </update>
  
  <update id="updateProcesoBatchActuLote" parameterClass="java.util.Map">
	    UPDATE BAS_PROCE_BATCH_ACTUA
		SET
		    NUM_LOTE = #numeroLote# 
	    WHERE
	        PAIS_COD_PAIS = #codigoPais# AND
			SIST_COD_SIST = #codigoSistema# AND
			PRBA_COD_PROC_BATC = #codigoProcesoBatch#
  </update>
  
  <update id="updateProcesoBatchEtapaProceso" parameterClass="java.util.Map">
	    UPDATE BAS_PROCE_BATCH_ACTUA
		SET
		    DES_ETAP_PROC = #descripcionEtapaProceso# 
	    WHERE
	        PAIS_COD_PAIS = #codigoPais# AND
			SIST_COD_SIST = #codigoSistema# AND
			PRBA_COD_PROC_BATC = #codigoProcesoBatch#
  </update>
  
  
  <update id="updateProcesoBatchRecomendacion" parameterClass="java.util.Map">
	    UPDATE BAS_PROCE_BATCH_ACTUA
		SET
		    DES_RECO_ERRO = #recomendacionError# 
	    WHERE
	        PAIS_COD_PAIS = #codigoPais# AND
			SIST_COD_SIST = #codigoSistema# AND
			PRBA_COD_PROC_BATC = #codigoProcesoBatch#
  </update>
  
  <update id="updateEstadoProcesoBatchActu" parameterClass="java.util.Map">
	    UPDATE BAS_PROCE_BATCH_ACTUA
		SET
		    EPBA_COD_ESTA_PROC = #codigoEstadoProceso#
	    WHERE
	        PAIS_COD_PAIS = #codigoPais# AND
			SIST_COD_SIST = #codigoSistema# AND
			PRBA_COD_PROC_BATC = #codigoProcesoBatch#
  </update>

  
  <update id="updateNumLoteGenSolicitudMonetaria" parameterClass="java.util.Map">
	    UPDATE PER_SOLIC_MONET
		SET
		    NUM_LOTE_GENE = #numeroLote#
	    WHERE
	        PAIS_COD_PAIS = #codigoPais# AND
			NUM_LOTE_GENE IS NULL
  </update>
  
  
  <select id="getProcesoBatchByInterfaz" parameterClass="java.util.Map" resultMap="labelValueResult">
    SELECT A.COD_PROC_BATC as CODIGO,
	       A.DES_PROC_BATC as DESCRIPCION 
	  FROM BAS_PROCE_BATCH A
	 WHERE A.EST_PROC_BATC != 9    
	  <isNotEmpty prepend="AND" property="codigoPais">
		  A.PAIS_COD_PAIS = #codigoPais#
	  </isNotEmpty>
	  <isNotEmpty prepend="AND" property="codigoInterfaz">
		  A.COD_INTE = #codigoInterfaz#        
	  </isNotEmpty>
  ORDER BY 2
  </select>

  
  <resultMap id="getProcesoBatchActuDependientesResult" class="procesoBatchActu">
    <result property="codigoPais" 						      column="PAIS_COD_PAIS" 	  /> 
    <result property="codigoSistema" 					      column="SIST_COD_SIST" 	  /> 
    <result property="procesoBatch.codigoProcesoBatch" 	      column="PRBA_COD_PROC_BATC" /> 
	<result property="procesoBatch.descripcionProcesoBatch"   column="DES_PROC_BATC"      /> 
	<result property="indicadorEjecucion" 		        column="IND_EJEC" 	        /> 	
	<result property="descIndicadorEjecucion" 		    column="DES_IND_EJEC" 	    /> 	
    <result property="numeroLote" 						column="NUM_LOTE" 	        /> 
	<result property="fechaInicioProceso" 				column="FEC_INIC_PROC" 	    /> 
    <result property="fechaFinProceso" 					column="FEC_FINA_PROC"      />
	<result property="codigoEstadoProceso"              column="EPBA_COD_ESTA_PROC" /> 
	<result property="descEstadoProceso"                column="DES_ESTA_PROC"      /> 
	<result property="log" 		                        column="DES_LOG" 	        /> 
    <result property="usuarioProceso"			 	    column="USU_PROC" 	        /> 
	<result property="status"			 	            column="STATUS" 	        /> 
	<result property="codigoInterfaz"			 	    column="COD_INTE"           /> 
  </resultMap>

   <select id="getProcesoBatchActuDependientesByCriteria" parameterClass="java.util.Map" resultMap="getProcesoBatchActuDependientesResult">
		SELECT PBA.PAIS_COD_PAIS, 
				  PBA.SIST_COD_SIST, 
				  PBA.PRBA_COD_PROC_BATC, 
				  PB.DES_PROC_BATC,
				  PBA.IND_EJEC, 
				  DECODE(PBA.IND_EJEC,'S','SI','NO') AS DES_IND_EJEC,
				  PBA.NUM_LOTE, 
				  PBA.FEC_INIC_PROC, 
				  PBA.FEC_FINA_PROC, 
				  PBA.EPBA_COD_ESTA_PROC,
				  NULL DES_ESTA_PROC, 
				  PBA.DES_LOG, 
				  PBA.USU_PROC,
				  GEN_PKG_GENER.GEN_FN_STATUS_ESTAD_BATCH(PBA.EPBA_COD_ESTA_PROC) as STATUS,
				  PB.COD_INTE
		  FROM (SELECT PAIS_COD_PAIS,
		               SIST_COD_SIS2 SIST_COD_SIST,
		               COD_PROC_BAT2 COD_PROC_BATC
		          FROM BAS_PROCE_BATCH_DEPEN
		         WHERE PAIS_COD_PAIS =  #codigoPais#
		           AND SIST_COD_SIS1 = #codigoSistema# 
		           AND COD_PROC_BAT1 = #codigoProcesoBatch#
		        UNION ALL
		        SELECT PAIS_COD_PAIS,
		               SIST_COD_SIS1,
		               COD_PROC_BAT1
		          FROM BAS_PROCE_BATCH_DEPEN
		         WHERE PAIS_COD_PAIS =  #codigoPais#
		           AND SIST_COD_SIS2 = #codigoSistema#
		           AND COD_PROC_BAT2 = #codigoProcesoBatch#) DEP,
		       BAS_PROCE_BATCH_ACTUA PBA,
		       BAS_PROCE_BATCH PB
		 WHERE PBA.PAIS_COD_PAIS = DEP.PAIS_COD_PAIS
		   AND PBA.SIST_COD_SIST = DEP.SIST_COD_SIST
		   AND PBA.PRBA_COD_PROC_BATC = DEP.COD_PROC_BATC
		   AND PB.PAIS_COD_PAIS = PBA.PAIS_COD_PAIS
		   AND PB.SIST_COD_SIST = PBA.SIST_COD_SIST
		   AND PB.COD_PROC_BATC = PBA.PRBA_COD_PROC_BATC
		   AND PBA.IND_EJEC = 'S'
		   AND PBA.FEC_FINA_PROC IS NULL  	      
   </select>

   <resultMap id="getParametrosProcesoBatchResult" class="java.util.HashMap">
		<result property="nombreParametro"				column="nom_para" />
		<result property="valorParametro"				column="val_para" />
		           
	</resultMap>
     
	<select id="getParametrosProcesoBatch" parameterClass="java.util.Map" resultMap="getParametrosProcesoBatchResult">
		select nom_para, 
		       val_para
		  from BAS_PARAM_PROCE_BATCH
		 where pais_cod_pais = #codigoPais#
		   and sist_cod_sist = #codigoSistema#
		   and cod_proc_batc = #codigoProcesoBatch#
		   and est_para = '1'
		 order by cod_para
	</select>
	
	  <select id="getNroNivelesInterfazPaqueteSeleccionadas" parameterClass="interfaz2PK" resultClass="integer">
		SELECT COUNT(1)
		FROM 
		 (SELECT NIV_HILO
		  FROM bas_compo_paque c
		  WHERE C.INTE_COD_INPA = #codigo#
            AND C.PAIS_COD_PAIS = #codigoPais#
            AND C.SIST_COD_SIST =  #codigoSistema#
            <iterate prepend="AND" property="listaInterfacesSeleccionadas" open="(" close=")" conjunction="OR">
       	       C.INTE_COD_INTE=#listaInterfacesSeleccionadas[]#
           </iterate>
		  GROUP BY NIV_HILO
		  )
  </select>
  
  <select id="getNroNivelesInterfazPaquete" parameterClass="interfaz2PK" resultClass="integer">
		SELECT COUNT(1)
		FROM 
		 (SELECT NIV_HILO
		  FROM bas_compo_paque c
		  WHERE C.INTE_COD_INPA = #codigo#
            AND C.PAIS_COD_PAIS = #codigoPais#
            AND C.SIST_COD_SIST =  #codigoSistema#
		  GROUP BY NIV_HILO
		  )
	</select>
	
	  <resultMap id="baseResult" class="baseConfiguracionInterfaz">														
    	<result property="codigo" 		column="CODIGO"/>											
    	<result property="descripcion" 	column="DESCRIPCION"/>													
  </resultMap>
   
  <select id="getInterfacesNoAsignadas" parameterClass="interfaz2" resultMap="baseResult">
    SELECT COD_INTE CODIGO, COD_INTE || '-' || des_inte DESCRIPCION
	  FROM bas_inter
	 WHERE sist_cod_sist = #codigoSistema#
	   AND tip_gein = 'U'
	   AND pais_cod_pais = #codigoPais#
	   AND cod_inte NOT IN (SELECT inte_cod_inte
	                          FROM bas_compo_paque
	                         WHERE inte_cod_inpa = #codigo#)
  </select>
  
  <resultMap id="interfacesAsignadasResultMap" class="java.util.HashMap">
    	<result property="codigoPais"					column="pais_cod_pais"/>
    	<result property="codigoSistema"				column="sist_cod_sist"/>
    	<result property="codigoPaquete"				column="inte_cod_inpa"/>
    	<result property="codigoInterfaz"				column="COD_INTE"/>
    	<result property="descripcionInterfaz" 			column="des_inte"/>
    	<result property="ordenEjecucion" 				column="ord_ejec"/>
    	<result property="ordenMultiHilo"				column="ord_ejec_mult_hilo"/>
    	<result property="nivelHilo"					column="niv_hilo"/>
    	<result property="indicadorControl"				column="ind_ctrl"/>
  </resultMap>
    
  <select id="getInterfacesAsignadasList" parameterClass="interfaz2" resultMap="interfacesAsignadasResultMap">
	    SELECT 
	       c.pais_cod_pais,
           c.sist_cod_sist,
           c.inte_cod_inpa,
	       COD_INTE,
	       des_inte,
	       c.ord_ejec,
	       c.ord_ejec_mult_hilo,
	       c.niv_hilo,
	       c.ind_ctrl
	  FROM bas_inter i, bas_compo_paque c
	 WHERE i.cod_inte = c.inte_cod_inte
	   and c.inte_cod_inpa = #codigo#
	   and i.pais_cod_pais = #codigoPais#
	   and i.sist_cod_sist = #codigoSistema#
       ORDER BY C.NIV_HILO, C.ORD_EJEC_MULT_HILO, C.ORD_EJEC, I.COD_INTE	   
  </select>
  
  <insert id="insertComponenteInterfazPaqueteMante" parameterClass="java.util.Map">
      INSERT INTO BAS_COMPO_PAQUE (
      PAIS_COD_PAIS, 
      SIST_COD_SIST, 
      INTE_COD_INPA, 
      INTE_COD_INTE,
      ORD_EJEC,
      ORD_EJEC_MULT_HILO,
      NIV_HILO,
      IND_CTRL) 
      VALUES (
      #codigoPais#,
      #codigoSistema#,
      #codigoInterfazPaquete#,
      #codigoInterfazUnitaria#,
      #ordenEjecucion#,
      #ordenHilo#,
      #nivelHilo#,
      #indicadorControl#)
  </insert>
  
  <delete id="deleteComponentesInterfazPaqueteMante" parameterClass="java.util.Map">
      DELETE FROM BAS_COMPO_PAQUE
      WHERE PAIS_COD_PAIS = #codigoPais#
      AND SIST_COD_SIST = #codigoSistema#
      AND INTE_COD_INPA = #codigoInterfazPaquete#
      AND INTE_COD_INTE = #codigoInterfazUnitaria#
  </delete>
  
  <select id="getInterfazComponente" parameterClass="java.util.Map" resultClass="string">
	  SELECT COUNT(1) FROM BAS_COMPO_PAQUE
      WHERE PAIS_COD_PAIS = #codigoPais#
      AND SIST_COD_SIST = #codigoSistema#
      AND INTE_COD_INPA = #codigoInterfazPaquete#
      AND INTE_COD_INTE = #codigoInterfazUnitaria#
  </select>
	
	<!--   INI NSSICC -->
	<select id="getComponentesInterfazUnitaria" parameterClass="interfaz2PK" resultMap="interfazResult">
    SELECT 
    I.PAIS_COD_PAIS,
    I.SIST_COD_SIST, 
    I.COD_INTE,   
    I.TIP_INTE, 
    I.TIP_GEIN,     
    I.DES_INTE,
    I.FLA_HABI,
    I.FLA_EXAR,
    I.EXAR_COD_EXAR,
    I.FLA_DECA,
    I.DELI_COD_DELI,
    I.FLA_LOER,
    I.EXAR_COD_EXLO,
    I.DIR_TEMP,
    I.DIR_LOG,
    I.DIR_HIST,
    I.FLA_ENAR,
    I.DIR_ENSA,
    I.SER_FTP,
    I.PUE_FTP,
    I.USU_FTP,
    I.PAS_FTP,
    I.EST_INTE,
    I.FLA_FOCA,
    I.FOCA_COD_FOCA,
    I.FLA_ALFO,
    I.USU_DIGI,
    I.FEC_DIGI,
    I.USU_MODI,
    I.FEC_MODI,
    P.DES_PAIS,
    S.DES_SIST,
    I.TFAR_COD_TFAR,
    I.NOM_ARCH AS NOM_ARCH,
    I.TIP_NOAR,
    I.NUM_EJIN,
    I.FLA_ARVA,
	I.DIR_PROC,
	I.FLA_COMP,
	I.FLA_PROC,
    I.TIP_SELI,
    I.NOM_ETIQ_PRIN_XML,
    I.NOM_ETIQ_REGI_XML,
    I.IND_SELE_INTE,
    E.DES_EXAR,
    L.DES_EXAR DES_EXAR_LOG,
    1 as ORD_EJEC_MULT_HILO,
    1 as ORD_EJEC,
    I.IND_AGSL_ARVA,
    I.IND_PAQU_MULT,
	I.FLA_DIRE_ENTR_SALI,
	I.FLA_DIRE_LOG,
    I.FLA_DIRE_HIST,
    I.IND_PAQU_MULT_LOTE,
    1 as NIV_HILO,
    null as IND_CTRL,
    I.COD_HOMO,
   	I.VAL_CLAV_PRIV_SFTP,
	I.VAL_PASS_CLAV_SFTP,
	I.IND_EMAI,
	I.EMA_ORIG,
	I.EMA_DEST,
	I.EMA_COPI,
	I.VAL_SUBJ,
	I.VAL_ENCO_DING_SALI,
	I.FLA_COPY_DEST_TEMP_ARCH,
	I.FLA_VALI_CARG_PREV,
	I.IND_VALI_LOTE_ENTR,
	I.FLA_MOVE_ARCH_ENTR_TEMP
    FROM BAS_INTER I, BAS_PAIS P, BAS_SISTE S, BAS_EXTEN_ARCHI E, BAS_EXTEN_ARCHI L
    WHERE I.PAIS_COD_PAIS = P.COD_PAIS
    AND I.SIST_COD_SIST = S.COD_SIST
    AND S.PAIS_COD_PAIS = P.COD_PAIS
  
    AND I.EXAR_COD_EXAR = E.COD_EXAR
    AND I.EXAR_COD_EXLO = L.COD_EXAR
    AND I.COD_INTE = #codigo#
    
    AND I.PAIS_COD_PAIS = #codigoPais#
    AND I.SIST_COD_SIST =  #codigoSistema#
   </select>
  <!--   FIN NSSICC -->
  
  
</sqlMap>