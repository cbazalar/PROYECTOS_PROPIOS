<?xml version="1.0" encoding="UTF-8"?>                                                      
<!DOCTYPE sqlMap                                                        
    PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN"                                                     
    "http://www.ibatis.com/dtd/sql-map-2.dtd">                                                      

<sqlMap namespace="sisicc.InterfazAPESQL">
	<parameterMap id="executeInterfazAPEEnviarCabeceraDocumentosDYTCABParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarCabeceraDocumentosDYTCAB" 
               parameterMap="executeInterfazAPEEnviarCabeceraDocumentosDYTCABParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_cabec_docum(?, ?, ?, ?, ?, ?)}
    </procedure>
                
    <parameterMap id="executeInterfazAPEEnviarDetalleDocumentosDYTDETParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarDetalleDocumentosDYTDET" 
               parameterMap="executeInterfazAPEEnviarDetalleDocumentosDYTDETParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_detal_docum(?, ?, ?, ?, ?, ?)}
    </procedure>            
    
    <parameterMap id="executeInterfazAPEEnviarMaestroDestinosDYTCLIParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarMaestroDestinosDYTCLI" 
               parameterMap="executeInterfazAPEEnviarMaestroDestinosDYTCLIParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_maest_desti(?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarMaestroCuentasDYTCTAParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarMaestroCuentasDYTCTA" 
               parameterMap="executeInterfazAPEEnviarMaestroCuentasDYTCTAParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_maest_cuent(?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarMaestroTerritoriosDYTSCTParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="longitudOrden1"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="longitudOrden2"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="longitudOrden3"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarMaestroTerritoriosDYTSCT" 
               parameterMap="executeInterfazAPEEnviarMaestroTerritoriosDYTSCTParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_maest_terri(?, ?, ?, ?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarSecuenciaCuentasDYTSCXParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarSecuenciaCuentasDYTSCX" 
               parameterMap="executeInterfazAPEEnviarSecuenciaCuentasDYTSCXParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_secue_cuent(?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarCronogramaOperacionesDYTCROParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarCronogramaOperacionesDYTCRO" 
               parameterMap="executeInterfazAPEEnviarCronogramaOperacionesDYTCROParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_crono_opera(?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarControlProcesoDYTCTRParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="tipoProceso"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarControlProcesoDYTCTR" 
               parameterMap="executeInterfazAPEEnviarControlProcesoDYTCTRParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_contr_proce(?, ?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarEstimadosDistribucionParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>        
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarEstimadosDistribucion" 
               parameterMap="executeInterfazAPEEnviarEstimadosDistribucionParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_matri_campa(?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPERecepcionarAnaquelesParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>                      
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPERecepcionarAnaqueles" 
               parameterMap="executeInterfazAPERecepcionarAnaquelesParams">                                                     
        {call INT_PKG_APE.int_pr_ape_recep_anaqu(?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPERecepcionarChequeoParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>                      
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPERecepcionarChequeo" 
               parameterMap="executeInterfazAPERecepcionarChequeoParams">                                                     
        {call INT_PKG_APE.int_pr_ape_recep_chequ(?, ?, ?, ?)}
    </procedure>
    
    <update id="actualizarIndicador" parameterClass="map"> 		   
		UPDATE ped_solic_cabec 
		   SET ind_inte_lari_gene=1
		 WHERE perd_oid_peri = gen_pkg_gener.GEN_FN_DEVUELVE_ID_CRA_PERIO2(#codigoPeriodo#)
		   AND fec_fact = to_date(#fechaFacturacion#,'dd/MM/YYYY')
		   AND nvl(ind_inte_lari_gene,0)=0		               
    </update>
       
    <resultMap id="EnvioMailsAPEParamsResult" class="java.util.HashMap">																	        	      
			<result property="mailOrigen"          column="VAL_MAIL_ORIG"/>	    
			<result property="mailDestino"         column="VAL_MAIL_DEST"/>
			<result property="subject"             column="VAL_SUBJ"/>
			<result property="plantilla"           column="NOM_BODY"/>	    
	</resultMap>
	
	<select id="getEnvioMailsAPEParams" parameterClass="java.util.Map" resultMap="EnvioMailsAPEParamsResult">
			select VAL_MAIL_ORIG ,
			       VAL_MAIL_DEST,
			       VAL_SUBJ,
			       NOM_BODY
			from APE_ENVIO_EMAIL_PARAM 
			where cod_pais = #codigoPais#
			  and ind_acti = '1'
	</select>   
         
    <resultMap id="getListaProductosSinIndicadorResult" class="java.util.HashMap">																	        	      
			<result property="codigoPeriodo"          column="codigo_periodo"/>	    
			<result property="codigoSap"      		  column="codigo_sap"/>
			<result property="descripcion"            column="descripcion"/> 
	</resultMap>
	
	<select id="getListaProductosSinIndicador" parameterClass="java.util.Map" resultMap="getListaProductosSinIndicadorResult">
			select e.cod_peri as codigo_periodo, 
			       b.COD_SAP  as codigo_sap, 
			       c.VAL_I18N as descripcion
			from ape_estim_produ a, mae_produ b, gen_i18n_sicc_pais c, cra_perio d, seg_perio_corpo e
			where a.PROD_OID_PROD=b.OID_PROD
			and b.OID_PROD=c.VAL_OID and c.ATTR_ENTI='MAE_PRODU' 
			and a.PERD_OID_PERI=d.OID_PERI
			and d.PERI_OID_PERI=e.OID_PERI
			and e.COD_PERI=#codigoPeriodo#
			and b. COD_IND_DENT_CAJA is null
			group by e.COD_PERI, b.COD_SAP, c.VAL_I18N
			union
			select j.COD_PERI,b.COD_SAP,c.VAL_I18N 
			from pre_ofert f, pre_ofert_detal g, pre_matri_factu_cabec h, cra_perio i, seg_perio_corpo j, mae_produ b, gen_i18n_sicc_pais c
			where f.OID_OFER=g.OFER_OID_OFER and f.MFCA_OID_CABE=h.OID_CABE
			and h.PERD_OID_PERI=i.OID_PERI and i.PERI_OID_PERI=j.OID_PERI
			and g.PROD_OID_PROD=b.OID_PROD and b.OID_PROD=c.VAL_OID and c.ATTR_ENTI='MAE_PRODU'
			and j.COD_PERI=#codigoPeriodo#
			and b. COD_IND_DENT_CAJA is null
			and g.PROD_OID_PROD not in(select b.OID_PROD
			                            from ape_estim_produ a, mae_produ b, cra_perio d, seg_perio_corpo e
			                            where a.PROD_OID_PROD=b.OID_PROD
			                            and a.PERD_OID_PERI=d.OID_PERI
			                            and d.PERI_OID_PERI=e.OID_PERI
			                            and e.COD_PERI=#codigoPeriodo#
			                            )
			group by j.COD_PERI,b.COD_SAP,c.VAL_I18N
			union
			select distinct 
			    decode(spc1.cod_peri,null,#codigoPeriodo#,spc1.cod_peri), 
			     p.cod_sap,
			     c.VAL_I18N
			    
			from 
			    inc_concu_param_gener cpg
			    , inc_versi_concu vc
			    , inc_param_gener_premi pgp
			    , inc_param_nivel_premi pnp
			    , inc_premi_artic pa
			    , inc_lote_premi_artic lpa
			    , inc_artic_lote al
			    , mae_produ p
			    , inc_concu_param_consu cpc
			    , cra_perio cp1
			    , seg_perio_corpo spc1
			    , cra_perio cp2
			    , seg_perio_corpo spc2
			    , gen_i18n_sicc_pais c
			where
			    cpg.oid_para_gral = pgp.copa_oid_para_gral
			and cpg.oid_para_gral = vc.copa_oid_para_gral
			and p.OID_PROD=c.VAL_OID
			and pgp.oid_para_gene_prem = pnp.pagp_oid_para_gene_prem(+)
			and pnp.oid_para_nive_prem = pa.panp_oid_para_nive_prem(+)
			and pa.oid_prem_arti = lpa.prar_oid_prem_arti(+)
			and lpa.oid_lote_prem_arti = al.lopa_oid_lote_prem_arti(+)
			and al.prod_oid_prod = p.oid_prod(+)
			and cpg.oid_para_gral = cpc.copa_oid_para_gral(+)
			and pgp.perd_oid_peri = cp1.oid_peri(+)
			and cp1.peri_oid_peri = spc1.oid_peri(+)
			and cpc.perd_oid_peri_inic_eval = cp2.oid_peri(+)
			and p. COD_IND_DENT_CAJA is null
			and cp2.peri_oid_peri = spc2.oid_peri(+)
			and (spc1.cod_peri = #codigoPeriodo#
			     or (pgp.perd_oid_peri is null
			         and spc2.cod_peri in (#codigoPeriodo#,CUP_PKG_PROG_NUEVAS.GEN_FN_DEV_NSGTE_CAMPA(#codigoPeriodo#,-1)) 
			        )
			    )
			and ( (cpg.ind_acti = 1 and vc.vico_oid_vige_conc = 1)
			   or (cpg.ind_acti = 0 and vc.vico_oid_vige_conc = 6)
			 )
	</select>       

    <select id="getPeriodoProcesoEnvioAnaqueles" resultClass="string">
   		 select '20'||nvl(max(cod_peri),'0000') 
		   from INT_APE_MATRI_CAMPA_ANAQU
    </select>

    <parameterMap id="executeInterfazAPEEnviarCostoCajaParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
    <procedure id="executeInterfazAPEEnviarCostoCaja" parameterMap="executeInterfazAPEEnviarCostoCajaParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envio_costo_caja(?, ?, ?, ?, ?)}
    </procedure>

    <resultMap id="getPaisMarcaSatResult" class="java.util.HashMap">
		<result property="codigoMarca"          column="COD_MARCA"/>
		<result property="codigoPaisSAT"        column="COD_PAIS"/>
	</resultMap>
	<select id="getPaisMarcaSat" parameterClass="java.util.Map" resultMap="getPaisMarcaSatResult">
		SELECT	p.cod_comp   	COD_MARCA,
       			p.cod_pais_ocr  COD_PAIS
          FROM 	bas_pais_compa p
 	     WHERE 	p.cod_pais = #codigoPais#
 	</select>

    <parameterMap id="executeInterfazAPEEnviarArchivoProductosParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="codigoMarca"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoCanal"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoCD"         	   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarArchivoProductos" parameterMap="executeInterfazAPEEnviarArchivoProductosParams">                                                     
        {call INT_PKG_APE.INT_PR_APE_ENVIO_PRODU_WCS(?, ?, ?, ?, ?, ?, ?, ?)}
    </procedure>

    <parameterMap id="executeInterfazAPEEnviarArchivoAnaquelesParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="codigoMarca"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoCanal"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoCD"         	   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoMapaCD"         jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoVersion"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarArchivoAnaqueles" parameterMap="executeInterfazAPEEnviarArchivoAnaquelesParams">                                                     
        {call INT_PKG_APE.INT_PR_APE_ENVIO_ANAQU_WCS(?, ?, ?, ?, ?, ?, ?, ?, ?, ?)}
    </procedure>

    <parameterMap id="executeInterfazAPEEnviarOlasWCSParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoMarca"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoCD"     		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoLineaArmado"    jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="numeroOla"    		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarOlasWCS" parameterMap="executeInterfazAPEEnviarOlasWCSParams">
        {call INT_PKG_APE.INT_PR_APE_ENVIO_OLAS_WCS3(?, ?, ?, ?, ?, ?, ?, ?, ?)}
    </procedure>

    <parameterMap id="executeInterfazAPEEnviarDatosEtiquetadoWCSParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoMarca"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="numeroOla"    		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
		<parameter property="codigoCD"    		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	</parameterMap>

    <procedure id="executeInterfazAPEEnviarDatosEtiquetadoWCS" parameterMap="executeInterfazAPEEnviarDatosEtiquetadoWCSParams">                                                     
        {call INT_PKG_APE.INT_PR_APE_ENVIO_ETIQU_WCS8(?, ?, ?, ?, ?, ?, ?,? )}
    </procedure>
 
    <parameterMap id="executeInterfazAPEEnviarOlaConfirmarWCSParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoMarca"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="numeroOla"    		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    	<parameter property="codigoCD"    		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	</parameterMap>
 
    <procedure id="executeInterfazAPEEnviarOlaConfirmarWCS" parameterMap="executeInterfazAPEEnviarOlaConfirmarWCSParams">
        {call INT_PKG_APE.INT_PR_APE_ENVIO_OLAS_WCS3C( ?, ?, ?, ?, ?, ?,? )}
    </procedure>

    <parameterMap id="executeInterfazAPEEnviarDatosConfirmarEtiquetadoWCSParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoMarca"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="numeroOla"    		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
		<parameter property="codigoCD"    		   jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>

    <procedure id="executeInterfazAPEEnviarDatosConfirmarEtiquetadoWCS" parameterMap="executeInterfazAPEEnviarDatosConfirmarEtiquetadoWCSParams">                                                     
        {call INT_PKG_APE.INT_PR_APE_ENVIO_ETIQU_WCS8C(?, ?, ?, ?, ?, ?, ?)}
    </procedure>
    
	<parameterMap id="executeGenerarFacturasAnuladasWCSParams" class="map" >														
	    <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="codigoMarca"          jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	    <parameter property="numeroConsolidado"    jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
	</parameterMap>
	
	<procedure id="executeGenerarFacturasAnuladasWCS" parameterMap="executeGenerarFacturasAnuladasWCSParams" >											
		{call INT_PKG_APE.INT_PR_REC_FACTU_ANULA_WCS(?, ?, ?, ?, ?, ?)}
	</procedure>
    
    <parameterMap id="paramProcesarCajaEmbalaje" class="java.util.Map">
		<parameter property="codigoPais"            jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
		<parameter property="oidMarca"       		jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>		
 		<parameter property="oidCentro"     		jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>			
		<parameter property="oidLinea"      		jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN" />
		<parameter property="numConsolidado"      	jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN" />
		<parameter property="numCaja"      			jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN" />
		<parameter property="indArmado"      		jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN" />
	</parameterMap>
	<procedure id="executeProcesarCajaEmbalaje" parameterMap="paramProcesarCajaEmbalaje">
		{call APE_PKG_PROCE.APE_PR_PROCE_CAJA_TERMI_EMBAL(?, ?, ?, ?, ?, ?, ?) }
	</procedure>
	
	<parameterMap id="executeInterfazAPEEnviarProductosMaterialGerenteZonaRegionalParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>        
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarProductosMaterialGerenteZonaRegional" 
               parameterMap="executeInterfazAPEEnviarProductosMaterialGerenteZonaRegionalParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_produ_mater(?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarCabeceraBoletasRecojoParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>        
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarCabeceraBoletasRecojo" 
               parameterMap="executeInterfazAPEEnviarCabeceraBoletasRecojoParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_cabec_bolet(?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarDetalleBoletasRecojoParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>        
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarDetalleBoletasRecojo" 
               parameterMap="executeInterfazAPEEnviarDetalleBoletasRecojoParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_detal_bolet(?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarCabeceraBoletasRecojoFacturacionParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarCabeceraBoletasRecojoFacturacion" 
               parameterMap="executeInterfazAPEEnviarCabeceraBoletasRecojoFacturacionParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_cabec_bofac(?, ?, ?, ?, ?, ?)}
    </procedure>
    
    <parameterMap id="executeInterfazAPEEnviarDetalleBoletasRecojoFacturacionParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="fechaFacturacion"     jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
                                                        
    <procedure id="executeInterfazAPEEnviarDetalleBoletasRecojoFacturacion" 
               parameterMap="executeInterfazAPEEnviarDetalleBoletasRecojoFacturacionParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_detal_bofac(?, ?, ?, ?, ?, ?)}
    </procedure>

    <parameterMap id="executeInterfazAPEEnviarEstimadosDistribucionDAParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>       
        <parameter property="codigoPeriodo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>

    <procedure id="executeInterfazAPEEnviarEstimadosDistribucionDA" parameterMap="executeInterfazAPEEnviarEstimadosDistribucionDAParams">                                                     
        {call INT_PKG_APE.int_pr_ape_envi_matri_campa_da(?,?,?,?,?)}
    </procedure>
    
    <insert id="insertInterfazAPEInicioArmadoPedido" parameterClass="map">
		insert into APE_INICI_ARMAD_PEDID(COD_CONS,
                                     NUM_PEDI,
		                             FEC_INIC_ARMA,
									 HOR_INIC_ARMA,
									 FEC_CARG,
									 NUM_LOTE)
			values (#codigoConsultora#,
                    #numeroPedido#,
			        #fechaInicioArmado#,
					#horaInicioArmado#,
					to_char(sysdate, 'DD/MM/YYYY'),
					#numeroLote#
					)
    </insert>
    
    <insert id="insertInterfazAPEPedidosChequeados" parameterClass="map">
		insert into APE_PEDID_CHEQU(COD_CONS,
                                     NUM_PEDI,
                                     IND_PEDI_CHEQ,
		                             FEC_CHEQ,
									 HOR_CHEQ,
									 FEC_CARG,
									 NUM_LOTE)
			values (#codigoConsultora#,
                    #numeroPedido#,
			        #indicadorPedidosChequeados#,
			        #fechaChequeo#,
					#horaChequeo#,
					to_char(sysdate, 'DD/MM/YYYY'),
					#numeroLote#
					)
    </insert>
    
    <update id="updateInterfazAPEPedidosChequeados" parameterClass="map"> 		   
		update ped_Segui_pedid
		   set tip_cheq_inic = 'CH',
		       fec_cheq_inic = int_pkg_recla.gen_fn_to_date(#fechaChequeo#,
		                                                    'YYYYMMDD',
		                                                    #horaChequeo#,
		                                                    '24')
		 where SOCA_OID_SOLI_CABE in
		       (select oid_soli_Cabe
		          from ped_solic_cabec a, ped_segui_pedid b
		         where A.OID_SOLI_CABE = B.SOCA_OID_SOLI_CABE
		           and A.VAL_NUME_SOLI = #numeroPedido#)		               
    </update>
    
    <insert id="insertInterfazAPEPedidosDespachados" parameterClass="map">
		insert into APE_PEDID_DESPA(COD_CONS,
                                     NUM_PEDI,
		                             FEC_DESP,
									 HOR_DESP,
									 NUM_ASIG,
									 FEC_CARG,
									 NUM_LOTE)
			values (#codigoConsultora#,
                    #numeroPedido#,
			        #fechaDespacho#,
					#horaDespacho#,
					#numeroAsignacion#,
					to_char(sysdate, 'DD/MM/YYYY'),
					#numeroLote#
					)
    </insert>
    
       <parameterMap id="executeInterfazAPECambioFechaPromesaParams" class="map">
        <parameter property="numeroPedido"		jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="fechaPromesa"		jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="turno"             jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>

    <procedure id="executeInterfazAPECambioFechaPromesa" parameterMap="executeInterfazAPECambioFechaPromesaParams">                                                     
        {call fac_pkg_proc.fac_pr_cambio_fecha_prom(?,?,?)}
    </procedure>  
    
    <delete id="deleteInterfazAPERecepcionarPicadoCabecera" parameterClass="string">
    	DELETE FROM IMP_TMP_PRINT_PICAD WHERE USU_CREA = #value#
    </delete>
    
    <insert id="insertInterfazAPERecepcionarPicadoCabecera" parameterClass="map">
    	INSERT INTO IMP_TMP_PRINT_PICAD (
			COD_CLIE,
			COD_REGI,
			COD_ZONA,
			LIN_ARMA,
			TOT_CAJA,
			TIP_SERV,
			NUM_PEDI,
			FEC_FACT,
			CAM_FACT,
			IND_CHEQ,
			CEN_DIST,
			USU_CREA,
			FEC_CREA)
    	VALUES(
			#codigoConsultora#,
			#codigoRegion#,
			#codigoZona#,
			#lineaArmado#,
			#totalCajas#,
			#tipoServicio#,
			#numeroPedido#,
			#fechaFacturacion#,
			#campanyaFacturacion#,
			#indicadorChequeoPedido#,
			#cdpCentroDistribucion#,
			#codigoUsuario#,
			SYSDATE)
    </insert>

	<delete id="deleteInterfazAPERecepcionarPicadoDetalle" parameterClass="string">
    	DELETE FROM IMP_TMP_PRINT_PICAD_DETAL WHERE USU_CREA = #value#
    </delete>
    
    <insert id="insertInterfazAPERecepcionarPicadoDetalle" parameterClass="map">
    	INSERT INTO IMP_TMP_PRINT_PICAD_DETAL (
			TIP_SERV,
			NUM_PEDI,
			VAL_ANAQ,
			NOM_PROD,
			UNI_EMBA,
			NUM_CAJA,
			TIP_CAJA,
			ORD_LIPI,
			LIN_EMBA,
			EST_TRAB,
			COD_SAP,
			USU_CREA,
			FEC_CREA)    	
    	VALUES(
			#tipoServicio#,
			#numeroPedido#,
			#anaquel#,
			#nombreProducto#,
			#unidadesEmbalar#,
			#numeroCaja#,
			#tipoCaja#,
			#ordenListaPicado#,
			#lineaEmbalaje#,
			#estacionTrabajo#,
			#codigoSap#,
			#codigoUsuario#,
			SYSDATE)    	
    </insert>
    
    <insert id="insertInterfazAPERecepcionarOrdenImpresion" parameterClass="map">
    	INSERT INTO IMP_PRINT_APE (
			OID_APE,
			COD_PROC,
			TIP_ORDE,
			COD_REGI,
			COD_ZONA,
			COD_SECC,
			COD_TERR,
			COD_CLIE,
			VAL_PRIO,
			VAL_REPA,
			VAL_PISO,
			VAL_CDP,
			VAL_MODU,
			VAL_LINE,
			USU_CREA,
			FEC_CREA,
			IND_ACTI)
    	VALUES(
    		IMP_PAPE_SEQ.NEXTVAL,
			#codigoProceso#,
			#tipoRegistro#,
			#codigoRegion#,
			#codigoZona#,
			#codigoSeccion#,
			#codigoTerritorio#,
			#codigoConsultora#,
			#priorizacion#,
			#repartidor#,
			#piso#,
			#cdp#,
			#modulo#,
			#linea#,
			#codigoUsuario#,
			SYSDATE,
			'1')
    </insert>
    
    <select id="getCodigoProcesoPrint" resultClass="string">
   		 select max(cod_proc) from imp_print_spool
    </select>
    
    <parameterMap id="executeInterfazAPERecepcionarPicadoCabeceraParams" class="map">
        <parameter property="codigoPais"           jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoSistema"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoInterfaz"       jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="nombreArchivo"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
        <parameter property="codigoUsuario"        jdbcType="VARCHAR" javaType="java.lang.String"  mode="IN"/>
    </parameterMap>
    <procedure id="executeInterfazAPERecepcionarPicadoCabecera" parameterMap="executeInterfazAPERecepcionarPicadoCabeceraParams">
        {call int_pkg_ape.int_pr_ape_recep_picad_cabec(?, ?, ?, ?, ?)}
    </procedure>
    <procedure id="executeInterfazAPERecepcionarPicadoDetalle" parameterMap="executeInterfazAPERecepcionarPicadoCabeceraParams">
        {call int_pkg_ape.int_pr_ape_recep_picad_detal(?, ?, ?, ?, ?)}
    </procedure>
    <procedure id="executeInterfazAPERecepcionarOrdenImpresion" parameterMap="executeInterfazAPERecepcionarPicadoCabeceraParams">
        {call int_pkg_ape.int_pr_ape_recep_orden_impre(?, ?, ?, ?, ?)}
    </procedure>
    
    
</sqlMap>