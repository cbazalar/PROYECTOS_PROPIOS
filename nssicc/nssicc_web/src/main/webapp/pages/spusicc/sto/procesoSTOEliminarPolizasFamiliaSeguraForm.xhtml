<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ssicc="http://java.sun.com/jsf/composite/componentes/ssicc"
	xmlns:bel="http://www.belcorp.biz/ssicc/components">

<body>

	<ui:composition template="/templates/templateProceso.xhtml">
		<ui:param name="mAlias"
			value="#{procesoSTOEliminarPolizasFamiliaSeguraAction}" />

		<ui:define name="titulo_Pantalla">
			<h:outputText
				value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.title']}"
				styleClass="clsEncabezadoPantalla" />
		</ui:define>

		<ui:define name="body_criterio_proceso">

			<h:panelGrid columns="2" style="width:80%;">

				<h:panelGroup id="primerPanelGroup">
					<h:panelGrid columns="4">
						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.codigoPais']}"
							required="true" />
						<ssicc:label
							value="#{mPantallaPrincipalBean.currentUser.pais.descripcion}"
							header="true" required="true" />
						<ssicc:labelBlank />
						<ssicc:labelBlank />

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.tipoDocumento']}" />
						<ssicc:label value="#{mAlias.formProceso.descripcionDocumento}" />


						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.codigoPeriodo']}" />
						<ssicc:campaignCalendar2 id="codigoCampanhaCDR" manage="#{mAlias}"
							value="#{mAlias.formProceso.codigoPeriodo}" />

						<!-- 				CARGA -->

						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.carga']}"
							styleClass="clsSubEncabezadoPantalla06" />
						<ssicc:labelBlank />
						<ssicc:labelBlank />
						<ssicc:labelBlank />


						<!-- 				1 FILA -->


						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.fechaInicioCarga']}" />
						<ssicc:calendar id="fecInicCarga"
							value="#{mAlias.formProceso.fechaInicioCargaD}" />

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.horaInicioCarga']}" />
						<ssicc:selectMenu id="horaInicioCarga"
							value="#{mAlias.formProceso.horaInicioCarga}">
							<f:selectItem itemLabel="" itemValue="" />
							<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>


						<!-- 				2 FILA -->


						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.fechaFin']}" />
						<ssicc:calendar id="fecFinCarga"
							value="#{mAlias.formProceso.fechaFinCargaD}" />

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.horaFinCarga']}" />
						<ssicc:selectMenu id="horaFinCarga"
							value="#{mAlias.formProceso.horaFinCarga}">
							<f:selectItem itemLabel="" itemValue="" />
							<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>

						<!-- 				PROCESO -->

						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.proceso']}"
							styleClass="clsSubEncabezadoPantalla06" />

						<ssicc:labelBlank />
						<ssicc:labelBlank />
						<ssicc:labelBlank />

						<!-- 				3 FILA -->

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.fechaInicioProceso']}" />
						<ssicc:calendar id="fechaInicioProceso"
							value="#{mAlias.formProceso.fechaInicioProcesoD}" />

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.horaInicioProceso']}" />
						<ssicc:selectMenu id="horaInicioProceso"
							value="#{mAlias.formProceso.horaInicioProceso}">
							<f:selectItem itemLabel="" itemValue="" />
							<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>

						<!-- 				4 FILA -->

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.fechaFinProceso']}" />
						<ssicc:calendar id="fechaFinProceso"
							value="#{mAlias.formProceso.fechaFinProcesoD}" />

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.horaFinProceso']}" />
						<ssicc:selectMenu id="horaFinProceso"
							value="#{mAlias.formProceso.horaFinProceso}">
							<f:selectItem itemLabel="" itemValue="" />
							<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>


						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.numeroLote']}" />
						<p:inputText id="codigoLote"
							value="#{mAlias.formProceso.numeroLote}" maxlength="10">
						</p:inputText>

						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.estado']}" />
						<ssicc:selectMenu id="estado" value="#{mAlias.formProceso.estado}">
							<f:selectItems value="#{mAlias.stoEstadosGestionList}"
								var="lista" itemLabel="#{lista.label}"
								itemValue="#{lista.value}" />
						</ssicc:selectMenu>

						<!-- cLIENTE -->
						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.codigoCliente']}" />
						<p:inputText id="codigo"
							value="#{mAlias.formProceso.codigoCliente}"
							onkeypress="verificarCodigoCliente(this)"
							onchange="cambiarValor(this)"
							maxlength="#{mAlias.longitudCampoClientes}">
						</p:inputText>
						<ssicc:labelBlank />
						<ssicc:labelBlank />

						<!-- Region -->
						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.regionList']}" />
						<ssicc:selectManyMenu id="codigoRegion"
							value="#{mAlias.formProceso.regionList}" process="@this"
							accionListener="#{procesoSTOEliminarPolizasFamiliaSeguraAction.loadZonas}"
							update=":principalForm:zonaList:select">
							<f:selectItem itemLabel="Todos" itemValue="" />
							<f:selectItems value="#{mAlias.siccRegionList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectManyMenu>

						<!-- Zona -->
						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.zonaList']}"
							esRight="false" />
						<ssicc:selectManyMenu id="zonaList"
							value="#{mAlias.formProceso.zonaList}">
							<f:selectItems value="#{mAlias.siccZonaList}" var="lista"
								itemLabel="#{lista.label}" itemValue="#{lista.value}" />
						</ssicc:selectManyMenu>
						<ssicc:label
							key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.clienteFile']}" />
						<h:form prependId="true" id="formCargaArchivo"
							enctype="multipart/form-data">
							<p:fileUpload widgetVar="upload"
								fileUploadListener="#{mAlias.handleFileUpload}" mode="advanced"
								update=":principalForm:mensajesGrowl :principalForm:toolbar_principal :principalForm:primerPanelGroup :principalForm:panelToolBar :principalForm:panelArchivo :principalForm:tableArchivo"
								multiple="false" allowTypes="/(\.|\/)(txt|TXT)$/"
								invalidFileMessage="Debe ingresar un archivo con extension .txt"
								dragDropSupport="false" label="Buscar archivo"
								uploadLabel="Cargar" cancelLabel="Cancelar" auto="false"
								process="@this">
							</p:fileUpload>

						</h:form>
						<ssicc:labelBlank />
						<ssicc:label id="idAtachment" value="#{mAlias.attachment}" />

					</h:panelGrid>
				</h:panelGroup>


				<h:panelGroup columns="4" >
					<p:fieldset legend="Agrupado Por :" style="margin-bottom:20px">

					<h:panelGrid columns="2" style="border-collapse: inherit;border-color: red !important;"
						width="90%" title="Agrupado Por">
						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.agrupacion.Periodo']}" />
						<p:selectBooleanCheckbox value="#{mAlias.agrupacionPeriodo}" />
						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.agrupacion.FechaCarga']}" />
						<p:selectBooleanCheckbox value="#{mAlias.agrupacionFechaCarga}" />
						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.agrupacion.FechaProceso']}" />
						<p:selectBooleanCheckbox value="#{mAlias.agrupacionFechaProceso}" />
						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.agrupacion.Lote']}" />
						<p:selectBooleanCheckbox value="#{mAlias.agrupacionLote}" />
						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.agrupacion.Region']}" />
						<p:selectBooleanCheckbox value="#{mAlias.agrupacionRegion}" />
						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.agrupacion.Zona']}" />
						<p:selectBooleanCheckbox value="#{mAlias.agrupacionZona}" />
						<h:outputText
							value="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.agrupacion.Cliente']}" />
						<p:selectBooleanCheckbox value="#{mAlias.agrupacionCliente}" />

					</h:panelGrid>
					</p:fieldset>


				</h:panelGroup>




			</h:panelGrid>



			<h:panelGrid id="panelArchivo">
				<p:dataTable var="car" id="tableArchivo"
					value="#{mAlias.stoEliminarPedidosClientesList}"
					rendered="#{mAlias.mostrarGrilla}"
					emptyMessage="#{msg['dataTable.noExistenRegistrosFiltro']}"
					style="width:300px;">
					<p:column
						headerText="#{i18n['stoEliminarPedidosList.codigoCliente']}">
						<h:outputText value="#{car.label}" />
					</p:column>
				</p:dataTable>
			</h:panelGrid>


			<h:panelGrid columns="2" rendered="#{mAlias.mostrarDatatable}">

				<ssicc:label
					key="#{i18n['procesoSTOEliminarPolizasFamiliaSeguraForm.accion']}" />
				<ssicc:selectMenu id="acciones" value="#{mAlias.formProceso.accion}">
					<f:selectItem itemLabel="" itemValue="" />
					<f:selectItem
						itemLabel="#{i18n['select.procesoSTOEliminarPolizasFamiliaSeguraForm.eliminarSeleccionados']}"
						itemValue="ELS" />
				</ssicc:selectMenu>


			</h:panelGrid>




			<h:outputScript> 
    	
    	function verificarCodigoCliente(e)
    	{	
    		if (event.keyCode &lt; 48 || event.keyCode &gt; 57) event.returnValue = false; 
		  	
		  	if(event.keyCode == 13) 
		  	{	
		  		if(e.value != "")
		  		{
		  			e.value = pad(e.value, e.maxLength);
		  			document.getElementById('numeroDocumento').select();
		  		}
		  	}
    	}
    	
    	function cambiarValor(e)
    	{
    		if(e.value != "")
		  	{
		  		e.value = pad(e.value, e.maxLength);
		  	}
    	}
    	
    	function verificarCodigoLote(e)
    	{	
    		if (event.keyCode &lt; 48 || event.keyCode &gt; 57) event.returnValue = false; 
		  	
		  	if(event.keyCode == 13) 
		  	{	
		  		if(e.value != "")
		  		{
		  			e.value = pad(e.value, e.maxLength);
		  			document.getElementById('numeroDocumento').select();
		  		}
		  	}
    	}
    	
    	function cambiarValorLote(e)
    	{
    		if(e.value != "")
		  	{
		  		e.value = pad(e.value, e.maxLength);
		  	}
    	}
    	
    	function pad (str, max) 
    	{
    		str = str.toString();
    		return str.length &lt; max ? pad("0" + str, max) : str;
    	}     
    </h:outputScript>

			<h:panelGrid id="panelDatateble"
				rendered="#{mAlias.mostrarDatatable}">
				<!-- 				 process="@this" immediate="true" -->
				<p:remoteCommand name="refreshFooter"
					process=":principalForm:dataTableTest"
					update=":principalForm:dataTableTest:footerItems :principalForm:dataTableTest" />

				<p:dataTable widgetVar="dataTableWidgetVar1" id="dataTableTest"
					var="lista" paginator="true" value="#{mAlias.stoListaPedidos}"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
	                currentPageReportTemplate="{totalRecords} registros encontrados"
					rows="10" rowIndexVar="rowIndex" rowKey="#{lista}"
					selection="#{mAlias.beanProcesoSTOEliminarPolizasFamiliaSegura}"
					paginatorPosition="top"
					emptyMessage="#{msg['dataTable.noExistenRegistrosFiltro']}">

					<!-- Exportar -->
					<f:facet name="{Exporters}"> 
					            &nbsp;&nbsp;&nbsp;&nbsp;
								<h:commandLink>
									<p:graphicImage value="#{resource['images:excelForm.png']}"
						                width="26"
						                height="24" title="#{msg['botonExcel.tooltip']}"
										styleClass="clsImagen" style="vertical-align:middle" />
									<p:dataExporter type="xls" target="dataTableTest"
										fileName="findProcesoSTOEliminarPolizasFamiliaSegura" postProcessor="#{mDataExporterBean.postProcessXLS}"  />
								</h:commandLink>

					</f:facet>


					<p:ajax event="page"
						listener="#{procesoSTOEliminarPolizasFamiliaSeguraAction.onPage}"
						update=":principalForm:dataTableTest :principalForm:dataTableTest:footerItems"
						oncomplete="refreshFooter();"
						process=":principalForm:dataTableTest @this" />

					<p:column selectionMode="multiple" style="width:70px" />
					<!-- 					fecha carga -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.fechaCarga']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.fechaCarga}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.fechaCarga']}"
						rendered="#{mAlias.formProceso.agrupacionFechaCarga eq 'S'}"
						exportable="false">
						<h:outputText value="#{lista.fechaCarga}" />
					</p:column>

					<!-- 				fecha modificacion -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.fechaModificacion']}"
						rendered="#{mAlias.formProceso.agrupacionFechaProceso eq'S'}"
						exportable="false">
						<h:outputText value="#{lista.fechaModificacion}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.fechaModificacion']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.fechaModificacion}" />
					</p:column>

					<!-- numero de lote -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.numeroLote']}"
						rendered="#{mAlias.formProceso.agrupacionLote eq 'S'}"
						exportable="false">
						<h:outputText value="#{lista.numeroLote}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.numeroLote']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.numeroLote}" />
					</p:column>

					<!-- 	descripcion de region -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.descripcionRegion']}"
						rendered="#{mAlias.formProceso.agrupacionRegion eq 'S'}"
						exportable="false">
						<h:outputText value="#{lista.descripcionRegion}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.descripcionRegion']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.descripcionRegion}" />
					</p:column>

					<!-- codigo de zona -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.codigoZona']}"
						rendered="#{mAlias.formProceso.agrupacionZona eq 'S'}"
						exportable="false">
						<h:outputText value="#{lista.codigoZona}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.codigoZona']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.codigoZona}" />
					</p:column>

					<!-- codigo de cliente -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.codigoCliente']}"
						rendered="#{mAlias.formProceso.agrupacionCliente  eq 'S'}"
						exportable="false">
						<h:outputText value="#{lista.codigoCliente}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.codigoCliente']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.codigoCliente}" />
					</p:column>
					<!-- codigo periodo -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.codigoPeriodo']}"
						rendered="#{mAlias.formProceso.agrupacionPeriodo  eq 'S'}"
						exportable="false">
						<h:outputText value="#{lista.codigoPeriodo}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.codigoPeriodo']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.codigoPeriodo}" />
					</p:column>
					<!-- cargadas -->
					<p:column headerText="#{i18n['stoListaConsultaPedidos.cargadas']}"
						exportable="false"
						style="text-align: right;">
						<h:outputText value="#{lista.cargadas}" />
					</p:column>

					<p:column headerText="#{i18n['stoListaConsultaPedidos.cargadas']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.cargadas}" />
					</p:column>

					<!-- enviadas -->

					<p:column headerText="#{i18n['stoListaConsultaPedidos.enviadas']}"
						exportable="false"
						style="text-align: right;">
						<h:outputText value="#{lista.enviadas}" />
					</p:column>

					<p:column headerText="#{i18n['stoListaConsultaPedidos.enviadas']}"
						exportable="true"
						style="display: none;">
						<h:outputText value="#{lista.enviadas}" />
					</p:column>
					<!-- erradas -->
					<p:column headerText="#{i18n['stoListaConsultaPedidos.erradas']}"
						exportable="false"
						style="text-align: right;">
						<h:outputText value="#{lista.erradas}" />
					</p:column>

					<p:column headerText="#{i18n['stoListaConsultaPedidos.erradas']}"
						exportable="true" style="display: none;">
						<h:outputText value="#{lista.erradas}" />
					</p:column>
					<!-- rechazadas -->
					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.rechazadas']}"
						exportable="false" style="text-align: right;">
						<h:outputText value="#{lista.rechazadas}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaConsultaPedidos.rechazadas']}"
						exportable="true" style="display: none;">
						<h:outputText value="#{lista.rechazadas}" />
					</p:column>
					<!--  -->
					<p:columnGroup type="footer" id="footerItems">

						<p:row>
							<p:column footerText="Subtotales :">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaCarga}">


							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaProceso}">

							</p:column>


							<p:column rendered="#{mAlias.agrupacionLote}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionRegion}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionZona}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionPeriodo}">
							</p:column>


							<p:column footerText="#{mAlias.sumaSubtotalCargasT}"
								style="text-align: right;">
							</p:column>

							<p:column footerText="#{mAlias.sumaSubtotalEnviadasT}"
								style="text-align: right;">
							</p:column>

							<p:column footerText="#{mAlias.sumaSubtotalErradasT}"
								style="text-align: right;">
							</p:column>

							<p:column footerText="#{mAlias.sumaSubtotalRechazadasT}"
								style="text-align: right;">
							</p:column>


						</p:row>

						<p:row>
							<p:column footerText="Totales :">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaCarga}">


							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaProceso}">

							</p:column>


							<p:column rendered="#{mAlias.agrupacionLote}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionRegion}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionZona}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionPeriodo}">
							</p:column>

							<p:column footerText="#{mAlias.sumaCargas}"
								style="text-align: right;">
							</p:column>

							<p:column footerText="#{mAlias.sumaEnviadas}"
								style="text-align: right;">
							</p:column>

							<p:column footerText="#{mAlias.sumaErradas}"
								style="text-align: right;">
							</p:column>

							<p:column footerText="#{mAlias.sumaRechazadas}"
								style="text-align: right;">
							</p:column>


						</p:row>
					</p:columnGroup>

				</p:dataTable>
			</h:panelGrid>




		</ui:define>

	</ui:composition>
</body>
</html>
