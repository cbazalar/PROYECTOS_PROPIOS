<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ssicc="http://java.sun.com/jsf/composite/componentes/ssicc"
	xmlns:bel="http://www.belcorp.biz/ssicc/components">

<body>

	<ui:composition template="/templates/templateConsultaSearch.xhtml">
		<ui:param name="mAlias" value="#{consultaSTOPedidosAction}" />

		<ui:define name="titulo_Pantalla">
			<h:outputText value="#{i18n['consultaSTOPedidosForm.title']}"
				styleClass="clsEncabezadoPantalla" />
		</ui:define>

		<ui:define name="body_criterio_busqueda">
			<h:panelGrid columns="2" style="width:60%;">
				<h:panelGrid columns="8">
					<ssicc:label key="#{i18n['consultaSTOPedidosForm.codigoPais']}"
						required="true" />
					<ssicc:label
						value="#{mPantallaPrincipalBean.currentUser.pais.descripcion}"
						header="true" required="true" />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.tipoDocumento']}" />
					<ssicc:label value="#{mAlias.formBusqueda.descripcionDocumento}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />


					<ssicc:label key="#{i18n['consultaSTOPedidosForm.codigoPeriodo']}" />
					<ssicc:campaignCalendar2 id="codigoCampanhaCDR" manage="#{mAlias}"
						value="#{mAlias.formBusqueda.codigoPeriodo}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- 				CARGA -->

					<h:outputText value="#{i18n['consultaSTOPedidosForm.carga']}"
						styleClass="clsSubEncabezadoPantalla06" />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- 				1 FILA -->


					<ssicc:label key="#{i18n['consultaSTOPedidosForm.fechaInicio']}" />
					<ssicc:calendar id="fecInicCarga"
						value="#{mAlias.formBusqueda.fechaInicioD}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label
						key="#{i18n['consultaSTOPedidosForm.horaInicioCarga']}" />
					<ssicc:selectMenu id="horaInicioCarga"
						value="#{mAlias.formBusqueda.horaInicioCarga}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- 				2 FILA -->


					<ssicc:label key="#{i18n['consultaSTOPedidosForm.fechaFin']}" />
					<ssicc:calendar id="fecFinCarga"
						value="#{mAlias.formBusqueda.fechaFinD}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.horaFinCarga']}" />
					<ssicc:selectMenu id="horaFinCarga"
						value="#{mAlias.formBusqueda.horaFinCarga}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- 				PROCESO -->
					<h:outputText value="#{i18n['consultaSTOPedidosForm.proceso']}"
						styleClass="clsSubEncabezadoPantalla06" />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- 				3 FILA -->

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.fechaInicio']}" />
					<ssicc:calendar id="fechaInicioProceso"
						value="#{mAlias.formBusqueda.fechaInicioProcesoD}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label
						key="#{i18n['consultaSTOPedidosForm.horaInicioProceso']}" />
					<ssicc:selectMenu id="horaInicioProceso"
						value="#{mAlias.formBusqueda.horaInicioProceso}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- 				4 FILA -->

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.fechaFin']}" />
					<ssicc:calendar id="fechaFinProceso"
						value="#{mAlias.formBusqueda.fechaFinProcesoD}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.horaFinProceso']}" />
					<ssicc:selectMenu id="horaFinProceso"
						value="#{mAlias.formBusqueda.horaFinProceso}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- 	5 FILA FACTURACION -->
					<h:outputText
						value="#{i18n['consultaSTOPedidosForm.fechaProgFacturacion']}"
						styleClass="clsSubEncabezadoPantalla06" />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label
						key="#{i18n['consultaSTOPedidosForm.fechaInicioProgFacturacion']}" />
					<ssicc:calendar id="fechaInicioProgFacturacion"
						value="#{mAlias.formBusqueda.fechaInicioProgramadaFacturacionD}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label
						key="#{i18n['consultaSTOPedidosForm.fechaFinProgFacturacion']}" />
					<ssicc:calendar id="fechaFinProgFacturacion"
						value="#{mAlias.formBusqueda.fechaFinProgramadaFacturacionD}" />

					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<!-- 			6 FILA -->

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.numeroLote']}" />
					<p:inputText id="codigoLote"
						value="#{mAlias.formBusqueda.numeroLote}" maxlength="10">
					</p:inputText>

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.estado']}" />
					<ssicc:selectMenu id="estado" value="#{mAlias.formBusqueda.estado}">
						<f:selectItems value="#{mAlias.stoEstadosGestionList}" var="lista"
							itemLabel="#{lista.label}" itemValue="#{lista.value}" />
					</ssicc:selectMenu>


					<ssicc:labelBlank />
					<ssicc:labelBlank />


					<!-- 7 FILA -->

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.codigoCliente']}" />
					<h:inputText id="codigoCliente"
						value="#{mAlias.formBusqueda.codigoCliente}"
						onkeypress="if (event.keyCode == 44) {
							 			event.returnValue = true; 
			 							return;
									}
							        if ((event.keyCode &lt; 48 || event.keyCode &gt; 57) )
							            event.returnValue = false; 
									 
		               			    if(event.keyCode == 13){ 
		                       			this.value = formatClientes(this.value, #{mAlias.longitudCampoClientes});
		                       		}"
               		    onchange="this.value = formatClientes(this.value,#{mAlias.longitudCampoClientes});"
						size="#{3*mAlias.longitudCampoClientes}" 
						maxlength="#{30*mAlias.longitudCampoClientes}" />
					
					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label
						key="#{i18n['consultaSTOPedidosForm.documentoIdentidad']}" />

					<p:inputText id="documentoIdentidad"
						value="#{mAlias.formBusqueda.documentoIdentidad}" size="15"
						maxlength="15">
					</p:inputText>

					<ssicc:label key="#{i18n['consultaSTOPedidosForm.codigoOrigen']}" />
					<ssicc:selectMenu id="origen"
						value="#{mAlias.formBusqueda.codigoOrigen}">
						<f:selectItems value="#{mAlias.stoOrigenesList}" var="lista"
							itemLabel="#{lista.label}" itemValue="#{lista.value}" />
					</ssicc:selectMenu>

					<!-- Region -->
					<ssicc:label key="#{i18n['consultaSTOPedidosForm.regionList']}" />
					<ssicc:selectManyMenu id="codigoRegion"
						value="#{mAlias.formBusqueda.regionList}" process="@this"
						accionListener="#{consultaSTOPedidosAction.loadZonas}"
						update=":principalForm:zonaLista:select @this">
						<f:selectItem itemLabel="Todos" itemValue="" />
						<f:selectItems value="#{mAlias.siccRegionList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectManyMenu>

					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- Zona -->
					<ssicc:label key="#{i18n['consultaSTOPedidosForm.zonaList']}" />
					<ssicc:selectManyMenu id="zonaLista"
						value="#{mAlias.formBusqueda.zonaList}">
						<f:selectItems value="#{mAlias.siccZonaList}" var="lista"
							itemLabel="#{lista.label}" itemValue="#{lista.value}" />
					</ssicc:selectManyMenu>
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					



				</h:panelGrid>

				<h:panelGroup columns="4">
					<p:fieldset legend="Agrupado Por :" style="margin-bottom:20px">
						<h:panelGrid columns="2" styleClass="ui-panelgrid ui-widget"
							width="50%" title="Agrupado Por">

							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.Periodo']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionPeriodo}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.FechaCarga']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionFechaCarga}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.FechaProceso']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionFechaProceso}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.FechaProgFacturacion']}" />
							<p:selectBooleanCheckbox
								value="#{mAlias.agrupacionFechaProgFacturacion}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.Lote']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionLote}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.Region']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionRegion}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.Zona']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionZona}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.Cliente']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionCliente}" />
							<h:outputText
								value="#{i18n['consultaSTOPedidosForm.agrupacion.origen']}" />
							<p:selectBooleanCheckbox value="#{mAlias.agrupacionOrigen}" />

						</h:panelGrid>
					</p:fieldset>

				</h:panelGroup>



			</h:panelGrid>
			
			<h:panelGrid columns="2">
			      <ssicc:label key="#{i18n['consultaSTOPedidosForm.clienteFile']}" />
					<h:form prependId="true" id="formCargaArchivo"
						enctype="multipart/form-data">
						<p:fileUpload widgetVar="upload"
							fileUploadListener="#{mAlias.handleFileUpload}" mode="advanced"
							update=":principalForm:mensajesGrowl :principalForm:toolbar_principal :principalForm:panelToolBar :principalForm:dataGrilla1 :principalForm:dataGrilla2 :principalForm:panelCriterioBusqueda @this"
							multiple="false" allowTypes="/(\.|\/)(txt|TXT)$/"
							invalidFileMessage="Debe ingresar un archivo con extension .txt"
							dragDropSupport="false" label="Buscar archivo"
							uploadLabel="Cargar" cancelLabel="Cancelar" auto="false"
							process=":principalForm:dataGrilla1 :principalForm:dataGrilla2 @this">
						</p:fileUpload>
					</h:form>
            </h:panelGrid>

			<h:panelGroup id="dataGrilla1" rendered="#{mAlias.mostrarGrilla}">
				<h:panelGrid>
					<p:dataTable var="obj"
						value="#{mAlias.stoConsultarPedidosClientesList}"
						rendered="#{mAlias.mostrarGrilla}" style="width:250px;"
						emptyMessage="#{msg['dataTable.noExistenRegistrosFiltro']}">
						<p:column
							headerText="#{i18n['stoEliminarPedidosList.codigoCliente']}">
							<h:outputText value="#{obj.codigoCliente}" />
						</p:column>

					</p:dataTable>
				</h:panelGrid>
			</h:panelGroup>

			<h:panelGroup id="dataGrilla2" rendered="#{mAlias.mostrarGrilla}">

				<h:panelGrid>
					<p:dataTable var="grilla2" value="#{mAlias.stoResumenClientesList}"
						rendered="#{mAlias.mostrarGrilla}" style="width:600px;"
						emptyMessage="#{msg['dataTable.noExistenRegistrosFiltro']}">

						<p:column headerText="#{i18n['stoResumenClientesList.recibidos']}">
							<h:outputText value="#{grilla2.recibidos}" />
						</p:column>

						<p:column
							headerText="#{i18n['stoResumenClientesList.noEncontradas']}">
							<h:outputText value="#{grilla2.noEncontradas}" />
						</p:column>

						<p:column headerText="#{i18n['stoResumenClientesList.sto']}">
							<h:outputText value="#{grilla2.sto}" />
						</p:column>

						<p:column headerText="#{i18n['stoResumenClientesList.gp1']}">
							<h:outputText value="#{grilla2.gp1}" />
						</p:column>

						<p:column headerText="#{i18n['stoResumenClientesList.gp2']}">
							<h:outputText value="#{grilla2.gp2}" />
						</p:column>

						<p:column headerText="#{i18n['stoResumenClientesList.gp3']}">
							<h:outputText value="#{grilla2.gp3}" />
						</p:column>

						<p:column headerText="#{i18n['stoResumenClientesList.gp4']}">
							<h:outputText value="#{grilla2.gp4}" />
						</p:column>

						<p:column headerText="#{i18n['stoResumenClientesList.gp5']}">
							<h:outputText value="#{grilla2.gp5}" />
						</p:column>

						<p:column headerText="#{i18n['stoResumenClientesList.total']}">
							<h:outputText value="#{grilla2.total}" />
						</p:column>

					</p:dataTable>

				</h:panelGrid>
			</h:panelGroup>
			<h:outputScript> 
    	
    	function formatClientes(stringClientes,	maxLength) {	
			var newStringClientes = '';		
			var fragmentoTexto = stringClientes.split(',');
			for (i=0; i &lt; fragmentoTexto.length; i++) {
				if (i &gt; 0 ) {
					newStringClientes = newStringClientes + ',' +leftpad(fragmentoTexto[i], '0', maxLength, '');
				}
				else newStringClientes = newStringClientes +leftpad(fragmentoTexto[i], '0', maxLength, '');
			} 
			return newStringClientes;
		}
    	
    	function leftpad(theItem, thePad, minSize, thePrefix) {
			newItem = new String(theItem);
			if(newItem.length &gt; 0) {
				newPrefix = new String(thePrefix);
				
				if(newItem.length &lt; minSize) {
					if(newPrefix.length &gt; 0) {
						minSize = minSize - newPrefix.length
					}
					while (newItem.length &lt; minSize) {
				        newItem = thePad + newItem;
				    }
				    newItem = newPrefix + newItem;
				}
			}
		    return newItem;
		}
    	
    	function verificarCodigoCliente(e)
    	{	
    		if (event.keyCode &lt; 48 || event.keyCode &gt; 57) event.returnValue = false; 
		  	
		  	if(event.keyCode == 13) 
		  	{	
		  		if(e.value != "")
		  		{
		  			e.value = pad(e.value, e.maxLength);
		  		}
		  	}
    	}
    	
    	
    	
    	function cambiarValorLote(e)
    	{
    		if(e.value != "")
		  	{
		  		e.value = pad(e.value, e.maxLength);
		  	}
    	}
    	
    	function pad (str, max) 
    	{
    		str = str.toString();
    		return str.length &lt; max ? pad("0" + str, max) : str;
    	}
    	
		function validaPopup(param) {			
			var url1 =	'<h:outputText
					value="#{facesContext.externalContext.requestContextPath}" />';
			var url2='/pages/spusicc/sto/consultaSTODetallePedidosForm.xhtml';
			var url=url1+url2;
			var specs='dependent=yes,status=0,scrollbars=1,toolbar=0,menubar=0,location=0,directories=0,resizable=0';
			var varCliente='consultaSTODetallePedidosForm';
			openCentered(url, varCliente, specs, 900, 500);    
		}			
				
		function openCentered (url, name, specs, width, height) {
	    	var w = screen.availWidth;
	   		var h = screen.availHeight;
	    	var x = Math.round((w - width) / 2);
	   		var y = Math.round((h - height) / 2);  
	    
	    	var newSpecs = 'left=' + x + ',top=' + y + ',width=' + width + ',height=' + height;	
	
	    	if(specs != null &amp;&amp; specs.trim() != "") {    
	        	newSpecs = newSpecs + ',' + specs;
	    	}    
	    	window.open(url, name, newSpecs);
    	}     
		
    	
         
		  
    </h:outputScript>

			<h:panelGrid id="panelDatateble">
				<p:remoteCommand name="refreshFooter"
					process=":principalForm:dataTableTest1"
					update=":principalForm:dataTableTest1:footerItems :principalForm:dataTableTest1" />

				<p:dataTable style="width:1600px;" widgetVar="widgetConsultaSTO"
					id="dataTableTest1" var="lista" paginator="true"
					value="#{mAlias.stoListaPedidos}"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
					currentPageReportTemplate="{totalRecords} registros encontrados"
					rows="10" paginatorPosition="top"
					emptyMessage="#{msg['dataTable.noExistenRegistrosFiltro']}">

					<!-- Exportar -->
					<f:facet name="{Exporters}">
					&nbsp;&nbsp;&nbsp;&nbsp;
								<h:commandLink>
							<p:graphicImage value="#{resource['images:excelForm.png']}"
								width="26" height="24" title="#{msg['botonExcel.tooltip']}"
								styleClass="clsImagen" style="vertical-align:middle" />
							<p:dataExporter type="xls" target="dataTableTest1"
								fileName="findConsultaSTOPedidos" />
						</h:commandLink>


					</f:facet>

					<p:ajax event="page" listener="#{consultaSTOPedidosAction.onPage}"
						update=":principalForm:dataTableTest1 :principalForm:dataTableTest1:footerItems"
						oncomplete="refreshFooter();"
						process=":principalForm:dataTableTest1 @this" />

					<p:column footerText="" style="width:70px" />

					<p:column width="45" rendered="#{mAlias.agrupacionFechaCarga}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.fechaCarga']}" />
						</f:facet>

						<h:outputText value="#{lista.fechaCarga}" />
					</p:column>


					<p:column width="45" rendered="#{mAlias.agrupacionFechaProceso}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.fechaModificacion']}" />
						</f:facet>

						<h:outputText value="#{lista.fechaModificacion}" />
					</p:column>

					<p:column width="60"
						rendered="#{mAlias.agrupacionFechaProgFacturacion}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.fechaProgramadaFacturacion']}" />
						</f:facet>

						<h:outputText value="#{lista.fechaProgramadaFacturacion}" />
					</p:column>

					<p:column width="40" rendered="#{mAlias.agrupacionLote }">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.numeroLote']}" />
						</f:facet>

						<h:outputText value="#{lista.numeroLote}" />
					</p:column>

					<p:column width="60" rendered="#{mAlias.agrupacionRegion}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.descripcionRegion']}" />
						</f:facet>

						<h:outputText value="#{lista.descripcionRegion}" />
					</p:column>

					<p:column width="40"
						headerText="#{i18n['stoListaConsultaPedidos.codigoZona']}"
						rendered="#{mAlias.agrupacionZona}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.codigoZona']}" />
						</f:facet>

						<h:outputText value="#{lista.codigoZona}" />
					</p:column>

					<p:column width="70" rendered="#{mAlias.agrupacionCliente}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.descripcionSeccion']}" />
						</f:facet>

						<h:outputText value="#{lista.descripcionSeccion}" />
					</p:column>

					<p:column width="70" rendered="#{mAlias.agrupacionCliente}">
						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.codigoTerritorio']}" />
						</f:facet>

						<h:outputText value="#{lista.codigoTerritorio}" />
					</p:column>

					<p:column width="70" rendered="#{mAlias.agrupacionCliente}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.codigoCliente']}" />
						</f:facet>

						<p:commandLink id="ajax"
							rendered="#{lista.numGP3 > 0 || lista.numGP4 > 0 || lista.numGP5 > 0}"
							actionListener="#{consultaSTOPedidosAction.abrirPopup}"
							update="@this" styleClass="clsLinkSTO" process="@this"
							oncomplete="validaPopup();">
							<h:outputText value="#{lista.codigoCliente}"
								style="font-weight:bold; font-size:10px;" />
							<f:param name="codigoCliente" value="#{lista.codigoCliente}" />
							<f:param name="codigoCampanya" value="#{lista.codigoPeriodo}" />
							<f:param name="tipo" value="GP3" />
							<f:param name="secuencia"
								value="#{mAlias.numeroSecuenciaConsulta}" />
						</p:commandLink>

						<p:commandLink id="ajax1"
							rendered="#{lista.numGP3 == 0 and lista.numGP4 == 0 and lista.numGP5 == 0}"
							actionListener="#{consultaSTOPedidosAction.abrirPopup}"
							update="@this" styleClass="clsLinkSTO" process="@this"
							oncomplete="validaPopup();">
							<h:outputText value="#{lista.codigoCliente}"
								style="font-weight:bold; font-size:10px;" />
							<f:param name="codigoCliente" value="#{lista.codigoCliente}" />
							<f:param name="codigoCampanya" value="#{lista.codigoPeriodo}" />
							<f:param name="tipo" value="GP1" />
							<f:param name="secuencia"
								value="#{mAlias.numeroSecuenciaConsulta}" />

						</p:commandLink>

					</p:column>



					<p:column width="80" rendered="#{mAlias.agrupacionCliente}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.nombreCliente']}" />
						</f:facet>

						<h:outputText value="#{lista.nombreCliente}" />
					</p:column>

					<p:column width="57" rendered="#{mAlias.agrupacionCliente}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.documentoIdentidad']}" />
						</f:facet>

						<h:outputText value="#{lista.documentoIdentidad}" />
					</p:column>

					<p:column width="35" rendered="#{mAlias.agrupacionCliente}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.numeroTelefono']}" />
						</f:facet>

						<h:outputText value="#{lista.numeroTelefono}" />
					</p:column>

					<p:column width="29" rendered="#{mAlias.agrupacionPeriodo}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.codigoPeriodo']}" />
						</f:facet>

						<h:outputText value="#{lista.codigoPeriodo}" />
					</p:column>

					<p:column width="25" rendered="#{mAlias.agrupacionOrigen}">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.descripcionOrigen']}" />
						</f:facet>

						<h:outputText value="#{lista.descripcionOrigen}" />
					</p:column>

					<p:column width="30">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.montoPedido']}" />
						</f:facet>

						<h:outputText value="#{lista.montoPedido}" />
					</p:column>



					<p:column width="30" rendered="#{mAlias.agrupacionCliente}">

						<f:facet name="header">
							<h:outputText value="#{i18n['stoListaConsultaPedidos.deuda']}" />
						</f:facet>

						<h:outputText value="#{lista.deuda}" />
					</p:column>

					<p:column style="text-align: right;" width="35">

						<f:facet name="header">
							<h:outputText value="#{i18n['stoListaConsultaPedidos.cargadas']}" />
						</f:facet>

						<h:outputText value="#{lista.cargadas}" />
					</p:column>

					<p:column style="text-align: right;" width="25">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.correctas']}" />
						</f:facet>


						<h:outputText value="#{lista.correctas}" />
					</p:column>

					<p:column style="text-align: right;" width="15">

						<f:facet name="header">
							<h:outputText value="#{i18n['stoListaConsultaPedidos.numGP2']}" />
						</f:facet>


						<h:outputText value="#{lista.numGP2}" />
					</p:column>

					<p:column style="text-align: right;" width="15">
						<f:facet name="header">
							<h:outputText value="#{i18n['stoListaConsultaPedidos.numGP3']}" />
						</f:facet>

						<h:outputText value="#{lista.numGP3}" />
					</p:column>

					<p:column style="text-align: right;" width="15">

						<f:facet name="header">
							<h:outputText value="#{i18n['stoListaConsultaPedidos.numGP4']}" />
						</f:facet>

						<h:outputText value="#{lista.numGP4}" />
					</p:column>

					<p:column style="text-align: right;" width="15">
						<f:facet name="header">
							<h:outputText value="#{i18n['stoListaConsultaPedidos.numGP5']}" />
						</f:facet>

						<h:outputText value="#{lista.numGP5}" />
					</p:column>

					<p:column style="text-align: right;" width="35">
						<f:facet name="header">
							<h:outputText value="#{i18n['stoListaConsultaPedidos.erradas']}" />
						</f:facet>

						<h:outputText value="#{lista.erradas}" />
					</p:column>

					<p:column width="20" style="text-align: right;">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.rechazadas']}" />
						</f:facet>


						<h:outputText value="#{lista.rechazadas}" />
					</p:column>

					<p:column width="25" style="text-align: right;">

						<f:facet name="header">
							<h:outputText
								value="#{i18n['stoListaConsultaPedidos.noValidadas']}" />
						</f:facet>

						<h:outputText value="#{lista.noValidadas}" />
					</p:column>



					<p:columnGroup type="footer" id="footerItems"
						style="text-align: right;">




						<p:row>
							<p:column footerText="Subtotales :">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionPeriodo}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaCarga}">


							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaProceso}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaProgFacturacion}">

							</p:column>


							<p:column rendered="#{mAlias.agrupacionLote}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionRegion}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionZona}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="true">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionOrigen}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalCargasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalCorrectasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalNumGP2T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>
							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalNumGP3T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalNumGP4T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalNumGP5T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalErradasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalRechazadasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaSubtotalNoValidadasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>


						</p:row>

						<p:row>
							<p:column footerText="Totales :">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionPeriodo}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaCarga}">


							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaProceso}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionFechaProgFacturacion}">

							</p:column>


							<p:column rendered="#{mAlias.agrupacionLote}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionRegion}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionZona}">

							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column rendered="true">
							</p:column>

							<p:column rendered="#{mAlias.agrupacionOrigen}">
							</p:column>



							<p:column rendered="#{mAlias.agrupacionCliente}">
							</p:column>

							<p:column style="text-align: right;">
								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaCargasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaCorrectasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>
							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaNumGP2T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaNumGP3T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>
							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaNumGP4T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaNumGP5T}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>

							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaErradasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>


							</p:column>

							<p:column style="text-align: right;">
								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaRechazadasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>



							<p:column style="text-align: right;">

								<f:facet name="footer">
									<h:outputText value="#{mAlias.sumaNoValidadasT}">
										<f:convertNumber locale="es_PE" />
									</h:outputText>
								</f:facet>

							</p:column>
						</p:row>
					</p:columnGroup>





				</p:dataTable>
			</h:panelGrid>

		</ui:define>

		<!-- 		<ui:define name="body_final_busqueda"> -->
		<!-- 			<h:panelGroup id="panelDialogDetalleSTO"> -->
		<!-- 				<p:dialog id="dialogConsultaSTOPedido" closable="false" -->
		<!-- 					dynamic="false" fitViewport="false" header="Popup Detalle:" -->
		<!-- 					widgetVar="dialogConsultaSTOPedidosForm" width="900" height="500"> -->
		<!-- 					<ui:include -->
		<!-- 						src="/pages/spusicc/sto/consultaSTODetallePedidosForm.xhtml" /> -->
		<!-- 				</p:dialog> -->
		<!-- 			</h:panelGroup> -->
		<!-- 		</ui:define> -->
	</ui:composition>
</body>
</html>
