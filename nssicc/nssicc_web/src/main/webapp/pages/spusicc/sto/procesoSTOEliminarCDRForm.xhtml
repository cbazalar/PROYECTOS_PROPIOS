<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ssicc="http://java.sun.com/jsf/composite/componentes/ssicc"
	xmlns:bel="http://www.belcorp.biz/ssicc/components">

<body>

	<ui:composition template="/templates/templateProceso.xhtml">
		<ui:param name="mAlias" value="#{procesoSTOEliminarCDRAction}" />

		<ui:define name="titulo_Pantalla">
			<h:outputText value="#{i18n['procesoSTOEliminarCDRForm.title']}"
				styleClass="clsEncabezadoPantalla" />
		</ui:define>
		
		
		<ui:define name="body_toolbar_adicionales">

				<ssicc:linkAjax title="#{i18n['button.cerrar.campanha']}"
					value="#{i18n['button.cerrar.campanha']}"
					icon="/resources/images/delete24_s.gif" parametroAccion="CERRAR"
					parametroVentana="confirmDialogCerrar"
					rendered="#{mAlias.mostrarBotonEliminar}"
					accion="#{procesoSTOEliminarCDRAction.executeProceso}"
					update=":principalForm:panelCriterioBase :principalForm:panelDatateble @this"
					process=":principalForm:panelDatateble @this" />
		</ui:define>
		
		

		<ui:define name="body_criterio_proceso">


			<h:panelGroup>
				<h:panelGrid columns="4">
					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.codigoPais']}"
						required="true" />
					<ssicc:label
						value="#{mPantallaPrincipalBean.currentUser.pais.descripcion}"
						header="true" required="true" />
					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.tipoDocumento']}" />
					<ssicc:label
						value="#{i18n['procesoSTOEliminarCDRForm.descripcionTipoDocumento']}" />


					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.codigoPeriodo']}" />
					<ssicc:campaignCalendar2 id="codigoCampanhaCDR" manage="#{mAlias}"
						value="#{mAlias.formProceso.codigoPeriodo}" />


					<!-- 					CARGA -->

					<h:outputText value="#{i18n['procesoSTOEliminarCDRForm.carga']}" styleClass="clsSubEncabezadoPantalla06"  />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />


					<!-- 				1 FILA -->


					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.fechaInicio']}" />
					<ssicc:calendar id="fecInicCarga"
						value="#{mAlias.formProceso.fechaInicioD}" />

					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.horaInicioCarga']}" />
					<ssicc:selectMenu id="horaInicioCarga"
						value="#{mAlias.formProceso.horaInicioCarga}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>


					<!-- 				2 FILA -->


					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.fechaFin']}" />
					<ssicc:calendar id="fecFinCarga"
						value="#{mAlias.formProceso.fechaFinD}" />

					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.horaFinCarga']}" />
					<ssicc:selectMenu id="horaFinCarga"
						value="#{mAlias.formProceso.horaFinCarga}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>

					<!-- 					PROCESO -->

					<h:outputText value="#{i18n['procesoSTOEliminarCDRForm.proceso']}" styleClass="clsSubEncabezadoPantalla06"  />
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />


					<!-- 				3 FILA -->


					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.fechaInicio']}" />
					<ssicc:calendar id="fecInicProces"
						value="#{mAlias.formProceso.fechaInicioProcesoD}" />

					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.horaInicioProceso']}" />
					<ssicc:selectMenu id="horaInicioProceso"
						value="#{mAlias.formProceso.horaInicioProceso}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>


					<!-- 				4 FILA -->


					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.fechaFin']}" />
					<ssicc:calendar id="fechaFinProceso"
						value="#{mAlias.formProceso.fechaFinProcesoD}" />

					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.horaFinProceso']}" />
					<ssicc:selectMenu id="horaFinProceso"
						value="#{mAlias.formProceso.horaFinProceso}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.stoHorasCargaList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectMenu>

					<!-- 					5 FILA -->

					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.numeroLote']}" />
					<p:inputText id="codigoLote"
						value="#{mAlias.formProceso.numeroLote}"
						onkeypress="verificarCodigoLote(this)"
						onchange="cambiarValorLote(this)" maxlength="8" size="10">
					</p:inputText>

					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.estado']}" />
					<ssicc:selectMenu id="estado" value="#{mAlias.formProceso.estado}">
						<f:selectItems value="#{mAlias.stoEstadosGestionList}" var="lista"
							itemLabel="#{lista.label}" itemValue="#{lista.value}" />
					</ssicc:selectMenu>

					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.codigoCliente']}" />
					<p:inputText id="codigoCliente"
						value="#{mAlias.formProceso.codigoCliente}"
						onkeypress="verificarCodigoLote(this)"
						onchange="cambiarValorLote(this)"
						maxlength="#{mAlias.longitudCampoClientes}">
					</p:inputText>

					<ssicc:label
						key="#{i18n['procesoSTOEliminarCDRForm.numeroDocumento']}" />
					<p:inputText id="codigoDocumento"
						value="#{mAlias.formProceso.numeroDocumento}"
						onkeypress="verificarCodigoLote(this)"
						onchange="cambiarValorLote(this)"
						maxlength="#{mAlias.stoLongitudNumeroDocumento}">
					</p:inputText>


					<!-- Region -->
					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.regionList']}" />
					<ssicc:selectManyMenu id="codigoRegion"
						value="#{mAlias.formProceso.regionList}" process="@this"
						accionListener="#{procesoSTOEliminarCDRAction.loadZonas}"
						update=":principalForm:zonaList:select">
						<f:selectItem itemLabel="Todos" itemValue="" />
						<f:selectItems value="#{mAlias.siccRegionList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
					</ssicc:selectManyMenu>

					<!-- Zona -->
					<ssicc:label key="#{i18n['procesoSTOEliminarCDRForm.zonaList']}"
						esRight="false" />
					<ssicc:selectManyMenu id="zonaList"
						value="#{mAlias.formProceso.zonaList}">
						<f:selectItems value="#{mAlias.siccZonaList}" var="lista"
							itemLabel="#{lista.label}" itemValue="#{lista.value}" />
					</ssicc:selectManyMenu>
				</h:panelGrid>


				<h:outputScript> 
    	
    	function verificarCodigoCliente(e)
    	{	
    		if (event.keyCode &lt; 48 || event.keyCode &gt; 57) event.returnValue = false; 
		  	
		  	if(event.keyCode == 13) 
		  	{	
		  		if(e.value != "")
		  		{
		  			e.value = pad(e.value, e.maxLength);
		  			document.getElementById('numeroDocumento').select();
		  		}
		  	}
    	}
    	
    	function cambiarValor(e)
    	{
    		if(e.value != "")
		  	{
		  		e.value = pad(e.value, e.maxLength);
		  	}
    	}
    	
    	function verificarCodigoLote(e)
    	{	
    		if (event.keyCode &lt; 48 || event.keyCode &gt; 57) event.returnValue = false; 
		  	
		  	if(event.keyCode == 13) 
		  	{	
		  		if(e.value != "")
		  		{
		  			e.value = pad(e.value, e.maxLength);
		  			document.getElementById('numeroDocumento').select();
		  		}
		  	}
    	}
    	
    	function cambiarValorLote(e)
    	{
    		if(e.value != "")
		  	{
		  		e.value = pad(e.value, e.maxLength);
		  	}
    	}
    	
    	function pad (str, max) 
    	{
    		str = str.toString();
    		return str.length &lt; max ? pad("0" + str, max) : str;
    	}     
    </h:outputScript>

			</h:panelGroup>

			<p:remoteCommand name="refreshFooter"
					process=":principalForm:dataTableTest"
					update=":principalForm:dataTableTest:footerItems :principalForm:dataTableTest" />
					
			<h:panelGrid id="panelDatateble" rendered="#{mAlias.mostrarDatatable}">
				<p:dataTable widgetVar="dataTableWidgetVar" id="dataTableTest"
					var="lista" paginator="true" value="#{mAlias.stoListaValidaciones}"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
	                currentPageReportTemplate="{totalRecords} registros encontrados"
					rows="10" rowIndexVar="rowIndex" rowKey="#{lista}"
					selection="#{mAlias.beanProcesoSTOEliminarCDR}"
					paginatorPosition="top"
					emptyMessage="#{msg['dataTable.noExistenRegistrosFiltro']}">

					<!-- Exportar -->
					<f:facet name="{Exporters}"> 
					            &nbsp;&nbsp;&nbsp;&nbsp;
								<h:commandLink>
									<p:graphicImage value="#{resource['images:excelForm.png']}"
						                width="26"
						                height="24" title="#{msg['botonExcel.tooltip']}"
										styleClass="clsImagen" style="vertical-align:middle" />
									<p:dataExporter type="xls" target="dataTableTest"
										fileName="findProcesoSTOEliminarCDR" postProcessor="#{mDataExporterBean.postProcessXLS}"  />
								</h:commandLink>

					</f:facet>
					
					<p:ajax event="page"
						listener="#{procesoSTOEliminarCDRAction.onPage}"
						update=":principalForm:dataTableTest:footerItems"
						oncomplete="refreshFooter();" process="@this" />
					<p:column selectionMode="multiple" style="width:70px" />

					<p:column width="80" exportable="true"
						headerText="#{i18n['stoListaValidaciones.tipoDocumento']}">
						<h:outputText value="#{lista.tipoDocumento}" />
					</p:column>


					<p:column width="40" headerText="#{i18n['stoListaValidaciones.fecha']}" exportable="true">
						<h:outputText value="#{lista.fecha}" />
					</p:column>

					<p:column width="40"
						headerText="#{i18n['stoListaValidaciones.fechaModificacion']}" exportable="true">
						<h:outputText value="#{lista.fechaModificacion}" />
					</p:column>

					<p:column width="40" headerText="#{i18n['stoListaValidaciones.lote']}" exportable="true">
						<h:outputText value="#{lista.lote}" />
					</p:column>

					<p:column width="55" headerText="#{i18n['stoListaValidaciones.codRegion']}" exportable="true">
						<h:outputText value="#{lista.codRegion}" />
					</p:column>

					<p:column width="30" headerText="#{i18n['stoListaValidaciones.codZona']}" exportable="true">
						<h:outputText value="#{lista.codZona}" />
					</p:column>

					<p:column width="45" headerText="#{i18n['stoListaValidaciones.cliente']}" exportable="true">
						<h:outputText value="#{lista.cliente}" />
					</p:column>

					<p:column
						headerText="#{i18n['stoListaValidaciones.codigoPeriodo']}" exportable="true">
						<h:outputText value="#{lista.codigoPeriodo}" />
					</p:column>

					<p:column width="40"
						headerText="#{i18n['stoListaValidaciones.numeroDocumento']}" exportable="true">
						<h:outputText value="#{lista.numeroDocumento}" />
					</p:column>

					<p:column headerText="#{i18n['stoListaValidaciones.totalCarga']}" style="text-align: right;" exportable="true">
						<h:outputText value="#{lista.totalCarga}" />
					</p:column>

					<p:column headerText="#{i18n['stoListaValidaciones.cantidadGP1']}" style="text-align: right;" exportable="true">
						<h:outputText value="#{lista.cantidadGP1}" />
					</p:column>

					<p:column width="45"
						headerText="#{i18n['stoListaValidaciones.cantidadFacturadas']}" style="text-align: right;" exportable="true">
						<h:outputText value="#{lista.cantidadFacturadas}" />
					</p:column>

					<p:column headerText="#{i18n['stoListaValidaciones.erradas']}" style="text-align: right;" exportable="true">
						<h:outputText value="#{lista.erradas}" />
					</p:column>

					<p:column width="45" headerText="#{i18n['stoListaValidaciones.rechazadas']}" style="text-align: right;" exportable="true">
						<h:outputText value="#{lista.rechazadas}" />
					</p:column>

					<p:column headerText="#{i18n['stoListaEliminacion.detallesOK']}" style="text-align: right;" exportable="true">
						<h:outputText value="#{lista.detallesOK}" />
					</p:column>


			<p:columnGroup type="footer" id="footerItems">

						<p:row>
							<p:column footerText="Subtotales :" />

							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />					
							<p:column rendered="true" />
							<p:column footerText="#{mAlias.sumaSubtotalCargasT}"
								style="text-align: right;" />
							
							<p:column footerText="#{mAlias.sumaSubtotalEnviadasT}"
								style="text-align: right;"/>
							
							<p:column footerText="#{mAlias.sumaSubtotalFacturadasT}"
								style="text-align: right;" />

							<p:column footerText="#{mAlias.sumaSubtotalErradasT}"
								style="text-align: right;" />
								
							<p:column footerText="#{mAlias.sumaSubtotalRechazadasT}"
								style="text-align: right;" />


							<p:column footerText="#{mAlias.sumaSubtotalDetallesOkT}"
								style="text-align: right;"/>

						</p:row>

						<p:row>
							<p:column footerText="Totales :"/>

							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />
							<p:column rendered="true" />					
							<p:column rendered="true" />
							<p:column footerText="#{mAlias.sumaCargasT}"
								style="text-align: right;" />
							
							<p:column footerText="#{mAlias.sumaEnviadasT}"
								style="text-align: right;"/>
							
							<p:column footerText="#{mAlias.sumaFacturadasT}"
								style="text-align: right;" />

							<p:column footerText="#{mAlias.sumaErradasT}"
								style="text-align: right;" />
								
							<p:column footerText="#{mAlias.sumaRechazadasT}"
								style="text-align: right;" />


							<p:column footerText="#{mAlias.sumaDetallesOkT}"
								style="text-align: right;"/>

						</p:row>
					</p:columnGroup>
				
				</p:dataTable>
			</h:panelGrid>


	<h:panelGrid id="segundoPanelDatatable" rendered="#{mAlias.mostrarSegundoDatatable}">
				<p:dataTable id="dataTableTest1"
					var="lista" value="#{mAlias.stoListaReclamosEliminados}"
					paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} {Exporters}"
	                currentPageReportTemplate="{totalRecords} registros encontrados"
					rows="10" rowIndexVar="rowIndex" rowKey="#{lista}"
					selection="false" style="width:600px;"
					paginatorPosition="top"
					emptyMessage="#{msg['dataTable.noExistenRegistrosFiltro']}">

					<!-- Exportar -->
					<f:facet name="{Exporters}"> 
					            &nbsp;&nbsp;&nbsp;&nbsp;
								<h:commandLink>
									<p:graphicImage value="#{resource['images:excelForm.png']}"
						                width="26"
						                height="24" title="#{msg['botonExcel.tooltip']}"
										styleClass="clsImagen" style="vertical-align:middle" />
									<p:dataExporter type="xls" target="dataTableTest1"
										fileName="findProcesoSTOEliminarCDR" postProcessor="#{mDataExporterBean.postProcessXLS}"  />
								</h:commandLink>

					</f:facet>
					
				

					<p:column width="40" exportable="true"
						headerText="#{i18n['stoListaReclamosEliminados.numLote']}">
						<h:outputText value="#{lista.numLote}" />
					</p:column>
					
					<p:column width="60" exportable="true"
						headerText="#{i18n['stoListaReclamosEliminados.secNumeDocu']}">
						<h:outputText value="#{lista.secNumeDocu}" />
					</p:column>
					
					<p:column width="60" exportable="true"
						headerText="#{i18n['stoListaReclamosEliminados.numDocu']}">
						<h:outputText value="#{lista.numDocu}" />
					</p:column>
					
					<p:column width="60" exportable="true"
						headerText="#{i18n['stoListaReclamosEliminados.codClie']}">
						<h:outputText value="#{lista.codClie}" />
					</p:column>
					
					<p:column width="60" exportable="true"
						headerText="#{i18n['stoListaReclamosEliminados.desErro']}">
						<h:outputText value="#{lista.desErro}" />
					</p:column>
					
				</p:dataTable>
			</h:panelGrid>

	




		</ui:define>

		<ui:define name="body_final_busqueda">

			<ssicc:confirmDialogConfirmar id="confirmDialogCerrar"
				manage="#{mAlias}"
				mensaje="#{i18n['confirm.actualiza.lote.message']}"
				accion="#{procesoOCRControlFacturacionAction.executeProceso}"
				update=":principalForm:messagesPrincipalForm :principalForm @this" />

		</ui:define>
	</ui:composition>
</body>
</html>
