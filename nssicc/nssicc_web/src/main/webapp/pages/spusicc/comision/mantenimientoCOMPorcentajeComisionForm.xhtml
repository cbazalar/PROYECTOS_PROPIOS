<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ssicc="http://java.sun.com/jsf/composite/componentes/ssicc">

<body>
	<ui:composition template="/templates/templateMantenimientoForm.xhtml">
		<ui:param name="mAlias"
			value="#{mantenimientoCOMPorcentajeComisionSearchAction}" />

		<ui:define name="titulo_Pantalla">
			<h:outputText
				value="#{i18n['mantenimientoCOMPorcentajeComisionForm.title']}"
				styleClass="clsEncabezadoPantalla" />
		</ui:define>

		<ui:define name="body_criterio_mantenimiento">
			<h:panelGrid columns="5">

				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.codigoPais']}"
					required="true" />
				<ssicc:label
					value="#{mPantallaPrincipalBean.currentUser.pais.descripcion}" />
				<ssicc:labelBlank />
				<ssicc:labelBlank />
				<ssicc:labelBlank />

				<!-- ############ Tipo de Comisionista ############ -->
				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.codigoTipoComisionista']}"
					required="true" />
				<c:choose>
					<c:when test="${mAlias.formMantenimiento.newRecord}">
						<ssicc:selectMenu id="codigoTipoComisionista"
							value="#{mAlias.formMantenimiento.codigoTipoComisionista}"
							required="true">
							<f:selectItems value="#{mAlias.comTipoComisionistaList}"
								var="lista" itemLabel="#{lista.descripcion}"
								itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>
					</c:when>
					<c:otherwise>
						<ssicc:selectMenu id="codigoTipoComisionista"
							value="#{mAlias.formMantenimiento.codigoTipoComisionista}"
							required="true" disabled="true">
							<f:selectItems value="#{mAlias.comTipoComisionistaList}"
								var="lista" itemLabel="#{lista.descripcion}"
								itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>
					</c:otherwise>
				</c:choose>
				<ssicc:labelBlank />
				<ssicc:labelBlank />
				<ssicc:labelBlank />

				<!-- ############ Lista Marca ############ -->
				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.codigoMarca']}"
					required="true" />
				<c:choose>
					<c:when test="${mAlias.formMantenimiento.newRecord}">
						<ssicc:selectMenu id="codigoMarca"
							value="#{mAlias.formMantenimiento.codigoMarca}" required="true">
							<f:selectItems value="#{mAlias.siccMarcaList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>
					</c:when>
					<c:otherwise>
						<ssicc:selectMenu id="codigoMarca"
							value="#{mAlias.formMantenimiento.codigoMarca}" required="true"
							disabled="true">
							<f:selectItems value="#{mAlias.siccMarcaList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>
					</c:otherwise>
				</c:choose>
				<ssicc:labelBlank />
				<ssicc:labelBlank />
				<ssicc:labelBlank />

				<!-- ############ Lista Canal ############ -->
				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.codigoCanal']}"
					required="true" />
				<c:choose>
					<c:when test="${mAlias.formMantenimiento.newRecord}">
						<ssicc:selectMenu id="codigoCanal"
							value="#{mAlias.formMantenimiento.codigoCanal}" required="true">
							<f:selectItems value="#{mAlias.siccCanalList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>
					</c:when>
					<c:otherwise>
						<ssicc:selectMenu id="codigoCanal"
							value="#{mAlias.formMantenimiento.codigoCanal}" required="true"
							disabled="true">
							<f:selectItems value="#{mAlias.siccCanalList}" var="lista"
								itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
						</ssicc:selectMenu>
					</c:otherwise>
				</c:choose>
				<ssicc:labelBlank />
				<ssicc:labelBlank />
				<ssicc:labelBlank />

				<!-- ############ Vigencia ############ -->
				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.vigencia']}" />
				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.campaniaDesde']}"
					required="true" />
				<c:choose>
					<c:when test="${mAlias.formMantenimiento.newRecord}">
						<ssicc:campaignCalendar2 id="campaniaDesde" manage="#{mAlias}"
							value="#{mAlias.formMantenimiento.campaniaDesde}" required="true" />
					</c:when>
					<c:when test="${mAlias.consultar}">
						<ssicc:inputText id="campaniaDesde"
							value="#{mAlias.formMantenimiento.campaniaDesde}" required="true"
							readonly="true" />
					</c:when>
					<c:otherwise>
						<ssicc:inputText id="campaniaDesde"
							value="#{mAlias.formMantenimiento.campaniaDesde}" required="true"
							readonly="true" />
					</c:otherwise>
				</c:choose>
				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.campaniaHasta']}" />
				<c:choose>
					<c:when test="${mAlias.consultar}">
						<ssicc:inputText id="campaniaHasta"
							value="#{mAlias.formMantenimiento.campaniaHasta}" readonly="true" />
					</c:when>
					<c:otherwise>
						<ssicc:campaignCalendar2 id="campaniaHasta" manage="#{mAlias}"
							value="#{mAlias.formMantenimiento.campaniaHasta}"/>
					</c:otherwise>
				</c:choose>

				<!-- ############ Codigo Porcentaje ############ -->
				<ssicc:label
					key="#{i18n['mantenimientoCOMPorcentajeComisionForm.codigoPorcentaje']}"
					rendered="#{!mAlias.formMantenimiento.newRecord}" />
				<ssicc:inputText
					value="#{mAlias.formMantenimiento.codigoPorcentaje}"
					readonly="#{!mAlias.formMantenimiento.newRecord}"
					rendered="#{!mAlias.formMantenimiento.newRecord}" />

			</h:panelGrid>
		</ui:define>


		<!-- ########################## BODY_ADICIONAL ################################# -->
		<ui:define name="body_adicional_mantenimiento">

			<p:panel toggleable="true" toggleSpeed="300">

				<f:facet name="header">
					<ssicc:cabeceraFieldset
						value="#{i18n['mantenimientoCOMPorcentajeComisionForm.leyendaDetalle']}"
						icon="#{resource['images:buscar_on.png']}" />
				</f:facet>

				<f:facet name="actions">
					<h:panelGrid>
						<p:toolbar>
							<f:facet name="left">

								<ssicc:linkAjax value="Insertar" title=""
									icon="#{resource['images:nuevoForm2.png']}"
									width="30"
									height="30"
									accion="#{mantenimientoCOMPorcentajeComisionSearchAction.confirmar}"
									process="@this" parametroAccion="INSERTAR_DETALLE"
									parametroVentana="confirmDialogInsertarDetalle"
									update=":principalForm:messagesPrincipalForm"
									rendered="#{!mAlias.consultar}" />

								<ssicc:linkAjax value="Eliminar" title=""
									icon="#{resource['images:eliminarForm3.png']}"
									width="30"
									height="30"
									accion="#{mantenimientoCOMPorcentajeComisionSearchAction.confirmar}"
									process=":principalForm:panel_detalle_grilla  @this"
									parametroAccion="ELIMINAR_DETALLE"
									parametroVentana="confirmDialogEliminarDetalle"
									update=":principalForm:messagesPrincipalForm"
									rendered="#{!mAlias.consultar}" />

							</f:facet>
						</p:toolbar>
					</h:panelGrid>

				</f:facet>


				<h:panelGrid columns="5" id="panel_detalle">

					<!-- ############ Codigo Nivel ############ -->
					<ssicc:label
						key="#{i18n['mantenimientoCOMPorcentajeComisionForm.codigoNivel']}"
						required="true" rendered="#{!mAlias.consultar}" />

					<ssicc:selectMenu id="codigoNivel"
						value="#{mAlias.formMantenimiento.codigoNivel}"
						rendered="#{!mAlias.consultar}">
						<f:selectItem itemLabel="" itemValue="" />
						<f:selectItems value="#{mAlias.comNivelList}" var="lista"
							itemLabel="#{lista.descripcion}" itemValue="#{lista.codigoNivel}" />
					</ssicc:selectMenu>
					<ssicc:labelBlank />
					<ssicc:labelBlank />
					<ssicc:labelBlank />

					<!-- ############ Montos ############ -->
					<ssicc:label
						key="#{i18n['mantenimientoCOMPorcentajeComisionForm.montos']}"
						required="true" rendered="#{!mAlias.consultar}" />
					<ssicc:label
						key="#{i18n['mantenimientoCOMPorcentajeComisionForm.montoDesde']}"
						required="true" rendered="#{!mAlias.consultar}" />
					<ssicc:inputText id="montoDesde"
						value="#{mAlias.formMantenimiento.montoDesde}" size="8"
						maxlength="6" onkeypress="return jsEsNumeroDecimal(event);"
						onchange="formatearNumeroWithTope(this,2,10000);"
						rendered="#{!mAlias.consultar}" />
					<ssicc:label
						key="#{i18n['mantenimientoCOMPorcentajeComisionForm.montoHasta']}"
						required="true" rendered="#{!mAlias.consultar}" />
					<ssicc:inputText id="montoHasta"
						value="#{mAlias.formMantenimiento.montoHasta}" size="8"
						maxlength="6" onkeypress="return jsEsNumeroDecimal(event);"
						onchange="formatearNumeroWithTope(this,2,10000);"
						rendered="#{!mAlias.consultar}" />


					<!-- ############ Porcentaje Comision ############ -->

					<ssicc:label
						key="#{i18n['mantenimientoCOMPorcentajeComisionForm.valorPorc']}"
						required="true" rendered="#{!mAlias.consultar}" />
					<ssicc:inputText id="valorPorc"
						value="#{mAlias.formMantenimiento.valorPorc}" size="6"
						maxlength="6" onkeypress="return jsEsNumeroDecimal(event);"
						onchange="formatearNumeroWithTope(this,2,10000);"
						rendered="#{!mAlias.consultar}" />
				</h:panelGrid>
				<h:panelGrid id="panel_detalle_grilla">

					<ssicc:dataTable id="dataGrillaDetalle" mostrarTituloPanel="false"
						toggleable="true" draggable="false" draggableColumns="true"
						exportable="true" titulo="#{msg['dataTable.resultadoBusqueda']}"
						value="#{mAlias.comDetalleTableModel}" fileExport="dataDetalle"
						resizableColumns="true" manage="#{mAlias}" seleccionable="true"
						selection="#{mAlias.beanRegistroDetalle}">

						<p:column width="140" sortBy="#{lista.codigoPorcentaje}"
							rendered="#{!mAlias.formMantenimiento.newRecord}">
							<f:facet name="header">
								<h:outputText
									value="#{i18n['porcentajeComisionDetal.codigoPorcentaje']}" />
							</f:facet>
							<h:outputText value="#{lista.codigoPorcentaje}" />
						</p:column>

						<p:column width="140" sortBy="#{lista.descripcionNivel}">
							<f:facet name="header">
								<h:outputText value="#{i18n['porcentajeComisionDetal.nivel']}" />
							</f:facet>
							<h:outputText value="#{lista.descripcionNivel}" />
						</p:column>

						<p:column width="140" sortBy="#{lista.montoDesde}">
							<f:facet name="header">
								<h:outputText
									value="#{i18n['porcentajeComisionDetal.montoDesde']}" />
							</f:facet>
							<ssicc:inputText value="#{lista.montoDesde}" size="8"
								maxlength="6" onkeypress="return jsEsNumeroDecimal(event);"
								onchange="formatearNumeroWithTope(this,2,10000);"
								rendered="#{!mAlias.consultar}" />
							<h:outputText value="#{lista.montoDesde}"
								rendered="#{mAlias.consultar}" />
						</p:column>

						<p:column width="140" sortBy="#{lista.montoHasta}">
							<f:facet name="header">
								<h:outputText
									value="#{i18n['porcentajeComisionDetal.montoHasta']}" />
							</f:facet>
							<ssicc:inputText value="#{lista.montoHasta}" size="8"
								maxlength="6" onkeypress="return jsEsNumeroDecimal(event);"
								onchange="formatearNumeroWithTope(this,2,10000);"
								rendered="#{!mAlias.consultar}" />
							<h:outputText value="#{lista.montoHasta}"
								rendered="#{mAlias.consultar}" />
						</p:column>

						<p:column width="140" sortBy="#{lista.valorPorc}">
							<f:facet name="header">
								<h:outputText
									value="#{i18n['porcentajeComisionDetal.valorPorc']}" />
							</f:facet>

							<ssicc:inputText value="#{lista.valorPorc}" size="6"
								maxlength="6" onkeypress="return jsEsNumeroDecimal(event);"
								onchange="formatearNumeroWithTope(this,2,10000);"
								rendered="#{!mAlias.consultar}" />
							<h:outputText value="#{lista.valorPorc}"
								rendered="#{mAlias.consultar}" />

						</p:column>
					</ssicc:dataTable>

				</h:panelGrid>
			</p:panel>

			<ssicc:confirmDialogConfirmar id="confirmDialogInsertarDetalle"
				manage="#{mAlias}" mensaje="#{i18n['confirm.save.information']}"
				accion="#{mantenimientoCOMPorcentajeComisionSearchAction.addDetal}"
				update=":principalForm:messagesPrincipalForm :principalForm:panel_detalle :principalForm:panel_detalle_grilla" />
			<ssicc:confirmDialogConfirmar id="confirmDialogEliminarDetalle"
				manage="#{mAlias}" mensaje="#{i18n['confirm.delete.message']}"
				accion="#{mantenimientoCOMPorcentajeComisionSearchAction.deleteDetal}"
				update=":principalForm:messagesPrincipalForm :principalForm:panel_detalle :principalForm:panel_detalle_grilla" />

		</ui:define>
	</ui:composition>
</body>
</html>