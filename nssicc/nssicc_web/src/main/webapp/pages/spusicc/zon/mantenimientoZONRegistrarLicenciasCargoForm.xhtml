<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ssicc="http://java.sun.com/jsf/composite/componentes/ssicc">

<body>
	<ui:composition template="/templates/templateMantenimientoForm.xhtml">

		<ui:param name="mAlias" value="#{mantenimientoZONDirectorioVentasSearchAction}" />

		<ui:define name="titulo_Pantalla">
			<h:outputText value="#{i18n['mantenimientoZONCargosForm.licencias.title']}" styleClass="clsEncabezadoPantalla" />
		</ui:define>

		<ui:define name="body_criterio_mantenimiento">
			
			<h:panelGrid columns="6">
				<!-- ########################## Codigo Pais ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.codigoPais']}" required="true" />
				<ssicc:label value="#{mPantallaPrincipalBean.currentUser.pais.descripcion}" />
				<ssicc:labelBlank /> <ssicc:labelBlank />
				<ssicc:labelBlank /> <ssicc:labelBlank />

				<!-- ########################## Consultora ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.codigoClienteLicencia']}" required="true" />
				<h:panelGroup>
					<ssicc:label value="#{mAlias.mantenimientoZONCargosForm.codigoConsultora}" subtitle="true" />

					<!-- ########################## Nombre Consultora ######################### -->
					<p:outputLabel id="nombreCompletos" value="#{mAlias.mantenimientoZONCargosForm.nombreCliente}" style='border: 0; margin-left:5px;
						background-color: transparent; font-family: Tahoma; font-size: 10px; color: #355A8F; font-weight: bold;' />
				</h:panelGroup>

				<!-- ########################## Documento Identidad ######################### -->
 				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.documentoIndentidad']}" subtitle="true" />
				<p:outputLabel id="numeroDocumentoIdentidad" value="#{mAlias.mantenimientoZONCargosForm.docCliente}" style="border: 0; 
						background-color: transparent; font-family: Tahoma; font-size: 10px; color: #355A8F;font-weight: bold;" />
				<ssicc:labelBlank />
				<ssicc:labelBlank />

				<!-- ########################## Cargo ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.codigoCargoLicencia']}" required="true" />
				<ssicc:label id="descripcionCargo" value="#{mAlias.mantenimientoZONCargosForm.codigoCargoLicencia}" subtitle="true" />

				<!-- ########################## Rol ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.rol']}" />
				<p:outputLabel id="rolDesc" value="#{mAlias.mantenimientoZONCargosForm.rolDesc}" style="border: 0; font-weight: bold;
						background-color: transparent; font-family: Tahoma; font-size: 11px; color: #355A8F" />

				<!-- ########################## Perfil ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.perfil']}" />
				<p:outputLabel id="perfilDesc" value="#{mAlias.mantenimientoZONCargosForm.perfilDesc}" style="border: 0; font-weight: bold;
						background-color: transparent; font-family: Tahoma; font-size: 11px; color: #355A8F" />

				<!-- ########################## Unidad Administrativa ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.codigoUnidadAdministrativa']}" required="true" />
				<p:outputLabel value="#{mAlias.mantenimientoZONCargosForm.codigoUnidadAdministrativa}" escape="false"
					style="border: 0; background-color: transparent; white-space:pre-line; 
						font-family: Tahoma; font-size: 10px; font-weight: bold; color: #355A8F" />
				<ssicc:labelBlank /> <ssicc:labelBlank /> 
				<ssicc:labelBlank /> <ssicc:labelBlank />

				<!-- ########################## Tipo de Licencia ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.codigoTipoLicencia']}" required="true" />
				<ssicc:selectMenu value="#{mAlias.mantenimientoZONCargosForm.codigoTipoLicencia}">
					<f:selectItem itemLabel="" itemValue="" />
					<f:selectItems value="#{mAlias.zonMantTipoLicenciaList}" var="lista" 
						itemLabel="#{lista.descripcion}" itemValue="#{lista.codigo}" />
				</ssicc:selectMenu>
				<ssicc:labelBlank /> <ssicc:labelBlank />
				<ssicc:labelBlank /> <ssicc:labelBlank />

				<!-- ########################## Fecha Salida ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.fechaSalida']}" required="true" />
				<h:panelGroup>
					<ssicc:calendarListener value="#{mAlias.mantenimientoZONCargosForm.fechaSalidaDate}"
						accionlistener="#{mantenimientoZONDirectorioVentasSearchAction.cambiarSalidaNumeroDias}"
						update=":principalForm:diasLicencia :principalForm:mensajesGrowl" />

					<!-- ########################## Boton Calcular ######################### -->
					<p:commandLink id="btnCalcular1" ajax="true" process="@this"
						actionListener="#{mantenimientoZONDirectorioVentasSearchAction.seteaCampaniasFS}"
						update="campanyaFacturacion campanyaVenta mensajesGrowl">
						<p:graphicImage value="#{resource['images:minocu_hover.gif']}" />
					</p:commandLink>
				</h:panelGroup>

				<!-- ########################## Campaña Facturacion ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.campañaFacturacion']}" subtitle="true" />
				<p:outputLabel id="campanyaFacturacion" value="#{mAlias.mantenimientoZONCargosForm.campanyaFacturacion}" style="border: 0;
						background-color: transparent; font-family: Tahoma; font-size: 11px; color: #355A8F" />

				<!-- ########################## Campaña Venta ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.campañaVenta']}" subtitle="true" />
				<p:outputLabel id="campanyaVenta" value="#{mAlias.mantenimientoZONCargosForm.campanyaVenta}" style="border: 0; 
						background-color: transparent; font-family: Tahoma; font-size: 11px; color: #355A8F" />

				<!-- ########################## Fecha Regreso ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.fechaRegreso']}" required="true" />
				<h:panelGroup>
					<ssicc:calendarListener value="#{mAlias.mantenimientoZONCargosForm.fechaRegresoDate}"
						accionlistener="#{mantenimientoZONDirectorioVentasSearchAction.numeroDias}"
						update=":principalForm:diasLicencia :principalForm:mensajesGrowl" />

					<!-- ########################## Boton Calcular ######################### -->
					<p:commandLink id="btnCalcular2" ajax="true" process="@this"
						actionListener="#{mantenimientoZONDirectorioVentasSearchAction.seteaCampaniasFR}"
						update="campanyaFacturacion2 campanyaVenta2 mensajesGrowl">
						<p:graphicImage value="#{resource['images:minocu_hover.gif']}" />
					</p:commandLink>
				</h:panelGroup>

				<!-- ########################## Campaña Facturacion ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.campañaFacturacion']}" subtitle="true" />
				<p:outputLabel id="campanyaFacturacion2" value="#{mAlias.mantenimientoZONCargosForm.campanyaFacturacion2}" style="border: 0;
						background-color: transparent; font-family: Tahoma; font-size: 11px; color: #355A8F" />

				<!-- ########################## Campaña Venta ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.campañaVenta']}" subtitle="true" />
				<p:outputLabel id="campanyaVenta2" value="#{mAlias.mantenimientoZONCargosForm.campanyaVenta2}" style="border: 0; 
						background-color: transparent; font-family: Tahoma; font-size: 11px; color: #355A8F" />

				<!-- ########################## Dias Licencia ######################### -->
				<ssicc:label key="#{i18n['mantenimientoZONCargosForm.diasLicencia']}" subtitle="true" />
				<h:panelGroup id="diasLicencia">
					<p:outputLabel value="#{mAlias.diasLicencia}" style="border: 0; background-color: transparent; 
						font-family: Tahoma; font-size: 10px; font-weight: bold; color: #355A8F" />
				</h:panelGroup>

			</h:panelGrid>
			<br /><br /><br />
			
			<p:panel id="panelDatosGeneralesReemplazo" toggleable="true">
				<f:facet name="header">
					<ssicc:cabeceraFieldset value="#{i18n['mantenimientoZONCargosForm.codigoConsultora']}" icon="#{resource['images:signature.png']}" />
				</f:facet>
				<br /><br /><br />
				<h:panelGrid columns="5">
					<ssicc:labelBlank /><ssicc:labelBlank /><ssicc:labelBlank />
					<p:remoteCommand name="metodoKeyPress" process="codigoClienteBuscar @this" 
						actionListener="#{mantenimientoZONDirectorioVentasSearchAction.metodoKeyPressSeteaFocoCodigoConsultoraLicencias}" 
						update="codigoCorrrelativoCabeceraReemplazos nombresCompletosConsultoraReemplazo 
								nroDocumentoIdentidadReemplazo listaUnidadesAdministrativas 
 								:principalForm:mensajesGrowl codigoClienteBuscar"/> 
						
					<p:remoteCommand name="metodoKeyUp" process="codigoClienteBuscar @this" 
						actionListener="#{mantenimientoZONDirectorioVentasSearchAction.metodoKeyUpSeteaFocoCodigoConsultoraLicencias}" 
						update="codigoCorrrelativoCabeceraReemplazos nombresCompletosConsultoraReemplazo 
 								nroDocumentoIdentidadReemplazo listaUnidadesAdministrativas 
 								:principalForm:mensajesGrowl"/> 
								
					<!-- ########################## Codigo Cliente ######################### -->
					<ssicc:label key="#{i18n['mantenimientoZONCargosForm.codigoClienteLicencia']}" required="false" />
					<h:panelGroup >
						<h:inputText id="codigoClienteBuscar" value="#{mAlias.mantenimientoZONCargosForm.codigoClienteBuscar}" 
							size="#{mAlias.longitudCampoClientes}" maxlength="#{mAlias.longitudCampoClientes}" style="width:100px"
							onkeypress="if (event.keyCode &lt; 48 || event.keyCode &gt; 57) { event.returnValue = false;}
										if (event.keyCode == 13) { metodoKeyPress(); return false; }"
							onkeyup="metodoKeyUp()"
							onchange="cambiarValor(this)" />
						
						<ssicc:linkPopupInvocarAjax accion="#{mantenimientoZONDirectorioVentasSearchAction.invocarPopup}"
							parametroAccion="SCLIENTESLICENCIAS" />						
					</h:panelGroup>
					
					<h:panelGroup id="nombresCompletosConsultoraReemplazo">
						<p:outputLabel value="#{mAlias.mantenimientoZONCargosForm.nombresCompletosConsultoraReemplazo}"
							style="border: 0; background-color: transparent; 
							font-family: Tahoma; font-size: 10px; font-weight: bold; color: #355A8F" />
					</h:panelGroup>

					<ssicc:labelBlank />

					<!-- ########################## Cargo a Inactivar ######################### -->
					<ssicc:label key="#{i18n['mantenimientoZONCargosForm.selCargoInacti']}" required="false" />

					<!-- ########################## Documento Identidad ######################### -->
					<ssicc:label key="#{i18n['mantenimientoZONCargosForm.nroDocumentoIdentidadReemplazo']}" required="false" />
					<h:panelGroup id="nroDocumentoIdentidadReemplazo">
						<p:outputLabel value="#{mAlias.mantenimientoZONCargosForm.nroDocumentoIdentidadReemplazo}"
							style="border: 0; background-color: transparent; 
							font-family: Tahoma; font-size: 10px; font-weight: bold; color: #355A8F" />
					</h:panelGroup>
					<ssicc:labelBlank />

					<!-- ########################## Cargo ######################### -->
					<ssicc:label key="#{i18n['mantenimientoZONCargosForm.descripcionCargoConsultoraReemplazo']}" required="true" />
					<h:panelGroup id="codigoCorrrelativoCabeceraReemplazos">
						<ssicc:selectManyMenu value="#{mAlias.mantenimientoZONCargosForm.codigoCorrrelativoCabeceraReemplazos}"
							style="width:400px; height:auto;">
							<f:selectItems value="#{mAlias.zonCargosList}" var="lista"
								itemLabel="#{lista.label}" itemValue="#{lista.value}" />
						</ssicc:selectManyMenu>
					</h:panelGroup>
					<!-- ########################## Unidad Administrativa ######################### -->
					<ssicc:label key="#{i18n['mantenimientoZONCargosForm.unidadesAdministrativasaCargo']}" required="true" />
					<h:panelGroup id="listaUnidadesAdministrativas">
						<p:outputLabel value="#{mAlias.mantenimientoZONCargosForm.listaUnidadesAdministrativas}" escape="false"
							style="border: 0; background-color: transparent; white-space:pre-line;
							font-family: Tahoma; font-size: 10px; font-weight: bold; color: #355A8F" />
					</h:panelGroup>
				</h:panelGrid>
			</p:panel>
			<h:outputScript>
				function cambiarValor(e)
			    {	
			    	if(e.value != "")
					{
						e.value = pad(e.value, e.maxLength);
					}
			    }
			    	
			    function pad (str, max) 
			    {
			    	str = str.toString();
			    	return str.length &lt; max ? pad("0" + str, max) : str;
			    }   
			    
			    function retornar()
			    {
			    	var grabarLicencias = document.getElementById("grabarLicencias");
					if(grabarLicencias.value == 'S')
					{
				    	window.opener.retorno();
						this.close();
				    }	
				}		    
			</h:outputScript>
			<ssicc:alertDialogAction id="principalFormAlertActionLicencia" 
				mensaje="#{mAlias.mensajeAlertaDefaultAction}" manage="#{mAlias}" 
				oncomplete="retornar();" />
				
			<h:panelGroup id="flagGrabar">	
				<h:inputHidden id="grabarLicencias" value="#{mAlias.grabarLicencias}" />
			</h:panelGroup>
		</ui:define>

		<ui:define name="body_adicional_mantenimiento">
			
			<ssicc:confirmDialogConfirmar id="confirmDialogGuardar"
				manage="#{mAlias}" mensaje="#{i18n['confirm.save.information']}"
				idForm=":principalForm"
				oncomplete="retornar();"
				accion="#{mantenimientoZONDirectorioVentasSearchAction.guardarLicenciaCargo}"
				update=":principalForm:panelCriterioMantenimiento
						:principalForm:mensajesGrowl" />
		</ui:define>

		<ui:define name="body_toolbar_adicionales">
			<ssicc:linkAjax id="btnGuardar" value="#{i18n['button.save']}"
				title="#{i18n['button.save']}"
				accion="#{mantenimientoZONDirectorioVentasSearchAction.confirmar}"
				parametroAccion="mantenerLicencias"
				parametroVentana="confirmDialogGuardar"
				icon="/resources/images/saveForm.png"
						    width="34"
						    height="34"
						    partialSubmit="true"
				            actualizarForm="true" 
				mostrarMensajePrincipal="false" idForm=":principalForm"
				update=":principalForm:panelCriterioMantenimiento
						:principalForm:mensajesGrowl " />
			
			<p:separator />			
			<ssicc:linkAjaxNoAction id="btnCancel"
				icon="#{resource['images:salirForm.png']}" width="30" height="30"
				onclick="javascript: window.close();" value="Salir" process="@this" />
				
		</ui:define>
		
		<ui:define name="body_busqueda_popup">					
 			<ssicc:linkPopupCrearAjax id="buscarHIPDatosCliente"
				managePopup="#{mAlias.busquedaHIPClienteSearchAction}"
				accionAceptar="#{mantenimientoZONDirectorioVentasSearchAction.aceptarPopup}"
				accionSalir="#{mantenimientoZONDirectorioVentasSearchAction.salirPopup}"
				parametroAccion="SCLIENTESLICENCIAS" visible="#{mAlias.mostrarPopUpCliente}"
				paginaxhtml="/pages/popup/busquedaHIPClienteSearchForm.xhtml"
				update=":principalForm:codigoCorrrelativoCabeceraReemplazos :principalForm:nombresCompletosConsultoraReemplazo 
						:principalForm:nroDocumentoIdentidadReemplazo :principalForm:listaUnidadesAdministrativas
						:principalForm:mensajesGrowl :principalForm:codigoClienteBuscar"
				title="#{i18n['busquedaHIPClienteSearchForm.title']}" 
				parametroParametria="#{mAlias.formBusqueda.oidIdioma}"/>
				
		</ui:define>
	</ui:composition>
</body>
</html>