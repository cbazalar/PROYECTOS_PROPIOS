<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:ssicc="http://java.sun.com/jsf/composite/componentes/ssicc">
<h:head>
    <title><ui:define name="title">Nuevo Sistema SSiCC</ui:define></title>
    <meta http-equiv="content-type" content="text/xhtml; charset=UTF-8" />
   <h:outputScript library="js/gradiente" name="gradiente.js" /> 
    <h:outputScript library="js" name="global.js" />
</h:head>


<h:body>

<h:form id="menuForm" prependId="false" >
  
    <h:outputStylesheet library="css" name="menu.css" target="body" />
	<h:inputHidden id="targetMain" value="#{mPantallaPrincipalBean.targetMain}" />    
	<p:tabView orientation="bottom" activeIndex="2"  >
	   <p:tab  >
		    <f:facet name="title">  
			    <ssicc:cabeceraFieldset value="Favoritos" icon="#{resource['images/favoritos.png']}" />
			</f:facet> 
		
			<div id="favoritosTab" >
					<ul id="menu">
						<ui:repeat var="menuFavorito" value="#{mPantallaPrincipalBean.listaMenuFavoritos}">
								<li id="menu4">				
									<a href="#{facesContext.externalContext.requestContextPath}#{menuFavorito.urlJSF}" 
									   target="main" 
									   onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}#{menuFavorito.urlJSF}','#{menuFavorito.codigo}');">
									   	#{menuFavorito.descripcion} 
									</a>								            									    
								</li>      
						</ui:repeat>	
				 	</ul>

			</div>
	    </p:tab> 	
	
	   <p:tab  >
	     <f:facet name="title">  
		    <ssicc:cabeceraFieldset value="Ejemplos" icon="#{resource['images/menuEjemplos.png']}" />
		 </f:facet> 		
	
	     <div id="menuEjemplosTab" >	
				
			<ul id="menu">
				<li><a href="#">
				     <p:graphicImage value="#{resource['images:folder_yellow_open.png']}" style="border:0px " width="15" height="15"/>
			         &nbsp; 
				     Menu EjemplosXXX
				    </a>
					<ul>
					  <li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploEntradaTexto.xhtml" target="main" 
					                    onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploEntradaTexto.xhtml','TEST0001');">
					         Entrada Texto
					      </a>
					  </li>
						<li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploEditor.xhtml" target="main" 
						                   onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploEditor.xhtml','TEST0002');">
						       Editor
						    </a>
						</li>
						<li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploPieChart.xhtml" target="main" 
						                  onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploPieChart.xhtml','TEST0003');">
						       Pie Chart
						    </a>
						</li>
						<li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploDatatable.xhtml" target="main" 
						                   onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploDatatable.xhtml','TEST0004');">
						       Datatable
						    </a>
						</li> 		
					</ul>
				</li>
				<li><a href="#">
				      <p:graphicImage value="#{resource['images:folder_yellow_open.png']}" style="border:0px " width="15" height="15"/>
			           &nbsp;  
				      Menu Ejemplos Framework
				    </a>
					<ul>
						<li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/mantenimientoEjemploUsuarioList.xhtml" target="main" 
						    onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/mantenimientoEjemploUsuarioList.xhtml','TEST0005');">
					         Ejemplo Mantenimiento Busqueda
					      </a>
					  </li>	
					</ul>
				</li>
				
				<li><a href="#">
				      <p:graphicImage value="#{resource['images:folder_yellow_open.png']}" style="border:0px " width="15" height="15"/>
				      &nbsp; 
				      Menu Ejemplos Reportes
				    </a>
					<ul>			
						<li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploReporte.xhtml?codigoMenu=40020302" target="main" 
						    onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploReporte.xhtml?codigoMenu=40020302','TEST0006');">
					         Reporte Basico
					      </a>
					  </li>	
					</ul>
				</li>
				
				<li><a href="#">
				      <p:graphicImage value="#{resource['images:folder_yellow_open.png']}" style="border:0px " width="15" height="15"/>
				      &nbsp; 
				      Menu Ejemplos Otros
				    </a>
					<ul>
						<li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/pacman/ejemploPacManHTML5.xhtml" target="main" 
						   onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploPacManHTML5.xhtml','TEST0007');">
					         Juego Pacman
					      </a>
					  </li>	
					  <li id="menu4"><a href="#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/marioBros/ejemploMarioBrosHTML5.xhtml" target="main" 
					    onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}/pages/_ejemplos/ejemploMarioBrosHTML5.xhtml','TEST0008');">
					         Juego Mario Bros
					      </a>
					  </li>	
					</ul>
				</li>
			
			</ul>
		</div>
		</p:tab> 	
		
	    <p:tab  >
		     <f:facet name="title">  
			    <ssicc:cabeceraFieldset value="MenÃº" icon="#{resource['images/menuPrincipal.png']}" />
			 </f:facet> 
	
		  	<div id="menuTab" >	
				    
				<ul id="menu">
				  <ui:repeat var="menuBar" value="#{mPantallaPrincipalBean.arbolMenues}">
				     <li>
				        <a href="#">
				           <p:graphicImage value="#{resource['images:folder_yellow_open.png']}" style="border:0px " width="15" height="15"/>
				           &nbsp; 
				           #{menuBar.descripcion}
				        </a> 
				        <ui:fragment rendered="#{not empty menuBar.submenues}" > 
					        <ul>      
						        <ui:repeat var="menu" value="#{menuBar.submenues}">
				              <ui:fragment rendered="#{not empty menu.submenues}" > 
				                 <li id="menu2"> 
				                    <a href="#">
				                        <p:graphicImage value="#{resource['images:folder_yellow_open.png']}" style="border:0px " width="12" height="12"/>
				                        #{menu.descripcion}
				                    </a>
										        <ul>      
											        <ui:repeat var="submenu" value="#{menu.submenues}">
											           <ui:fragment rendered="#{not empty submenu.submenues}" >  
											              <li>
												              <a href="#">
												                  <p:graphicImage value="#{resource['images:folder_yellow_open.png']}" style="border:0px " width="12" height="12"/>
												                  #{submenu.descripcion}
												              </a>								            
													            <ul>
													              <ui:repeat var="subsubmenu" value="#{submenu.submenues}">
														              <li id="menu3">
														                 <!-- Aqui colocar con la pagina direccionada --> 
												                        <a href="#{facesContext.externalContext.requestContextPath}#{subsubmenu.urlJSF}" target="main" 
												                           onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}#{subsubmenu.urlJSF}','#{subsubmenu.codigo}');">
												                            #{subsubmenu.descripcion} 
												                        </a>								            									    
												                      </li>      
													              </ui:repeat>
													            </ul>  
												            </li>
											           </ui:fragment>
											           <!-- Aqui colocar con la pagina direccionada -->
											           <ui:fragment rendered="#{empty submenu.submenues}" >  
											              <li id="menu4">
												              <a href="#{facesContext.externalContext.requestContextPath}#{submenu.urlJSF}" target="main" 
												                 onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}#{submenu.urlJSF}','#{submenu.codigo}');" >
												                 #{submenu.descripcion} 
												              </a>								            									    
												            </li>
											           </ui:fragment>
											        </ui:repeat>
										        </ul>
										     </li>                  
									    </ui:fragment>	
									    <!-- Aqui colocar con la pagina direccionada -->
									    <ui:fragment rendered="#{empty menu.submenues}" > 
									       <li id="menu4"> 
									          <a href="#{facesContext.externalContext.requestContextPath}#{menu.urlJSF}" target="main" 
									             onclick="return verificarTargetMain('#{facesContext.externalContext.requestContextPath}#{menu.urlJSF}','#{menu.codigo}');" >
									             #{menu.descripcion} 					          
										        </a>
										     </li>                  
									    </ui:fragment>	 							        	                 
						              
						        </ui:repeat>
					        </ul>
				        </ui:fragment>
				     </li>
				  </ui:repeat>
				</ul>
		    </div>
	    </p:tab> 	
	
    </p:tabView>
	<p:remoteCommand name="ingresarOpcionMenu" actionListener="#{mPantallaPrincipalBean.ingresarOpcionMenu}"  />
	<pe:tooltip global="true"/>   
	 	
</h:form>              

 <script type="text/javascript" >
  
    $(function(){
    	$('#menu li a').click(function(event){
    		var elem = $(this).next();
    		if(elem.is('ul')){
    			event.preventDefault();
    			//$('#menu ul:visible').not(elem).slideUp();
    			elem.slideToggle();
    		}
    		var elem2 = $(this).html();
    		if (elem2.indexOf("folder_yellow_open.png") >= 0) {
    			elem2 = elem2.replace("folder_yellow_open.png", "folder_yellow.png");
    			$(this).html(elem2);
    		}
    		else {
    			if (elem2.indexOf("folder_yellow.png") >= 0) {
    				elem2 = elem2.replace("folder_yellow.png", "folder_yellow_open.png");
    				$(this).html(elem2);
    			}
    		}		
    	});
    });


  function ClosePopup() {
        ingresarOpcionMenu();
  } 

  function verificarTargetMain(paginaxhtml,codigoMenu) {
	   ingresarOpcionMenu();
	   var targetMain = document.getElementById("targetMain");
	   if (targetMain.value=="_blank") {
	       var win  = window.open(paginaxhtml, 
	    	                     codigoMenu,
	    						"dependent=yes,status=no,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,resizable=no,width=1300 height=600,top=100,left=100");
	       if(win.attachEvent) {
	    	   win.attachEvent("onunload", ClosePopup);
	       } 
	       else {
	           if(win.addEventListener) {
	        	   win.addEventListener("unload", ClosePopup, true);
	           } 
	           else {
	        	   win.onunload = ClosePopup;
	           }
	       }
		   return false;
	   }
	   return true;
  }


</script>

  
</h:body>
</html>
